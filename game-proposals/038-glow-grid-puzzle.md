# 038 - Glow Grid (글로우 그리드)

## 게임 컨셉
"Lights Out" 클래식 퍼즐을 네온 미학으로 재해석. 어두운 격자판의 셀을 탭하면 자신과 인접 셀이 토글(ON/OFF)되며, 모든 셀을 밝혀 그리드를 완성하는 논리 퍼즐. 2026 미니멀 퍼즐 트렌드(Stip, Puzzmo) + 만족스러운 시각 피드백(Pixel Flow) 결합.

## 핵심 메카닉
- **탭 토글**: 셀 탭 → 해당 셀 + 상하좌우 4개 셀 ON↔OFF 토글
- **목표**: 모든 셀을 ON(빛남) 상태로 만들기
- **턴 카운트**: 최소 턴으로 해결할수록 높은 별점
- **특수 셀 (레벨 진행에 따라 등장)**:
  - 🔒 **잠긴 셀**: 토글 불가, 인접 셀에 의해서만 영향
  - 🔄 **회전 셀**: 탭 시 대각선 방향으로 토글
  - ⚡ **전파 셀**: 탭 시 같은 행/열 전체 토글
  - 🎯 **타겟 셀**: 반드시 마지막에 ON이어야 함 (특정 패턴 모드)

## 차별점
- **기존 포트폴리오 미보유 장르**: Lights Out 계열 논리 퍼즐 없음
- **수학적 깊이**: 선형대수 기반 해결 가능성 (GF(2) 위의 연립방정식)
- **Pixel Flow식 만족감**: 셀이 켜질 때 네온 글로우 + 파티클 이펙트
- **극도의 접근성**: 탭 한 번으로 플레이 (원터치)
- **2026 트렌드 적중**: 미니멀 + 논리 + 데일리 챌린지 + 코지 분위기

## 타겟 유저
- **1차**: 캐주얼 퍼즐러 (모든 연령, 짧은 세션 2-5분)
- **2차**: 로직 퍼즐 마니아 (최적해 도전, 수학적 접근)
- **3차**: ASMR/코지 게임 팬 (글로우 효과, 사운드)

## 수익 모델
- **광고**: 레벨 간 전면 광고 (5레벨마다)
- **보상 광고**: 힌트 (최적 다음 탭 위치 표시)
- **IAP**: 힌트 팩 ($1.99), 테마 팩 ($0.99) — 네온 컬러 변경
- **광고 제거**: $2.99
- **데일리 챌린지**: 글로벌 리더보드 (무료, 리텐션용)

## 기술 스택
- **Pure HTML5 + Canvas** (단일 파일)
- **빛/글로우 효과**: radialGradient + blur filter + 파티클 시스템
- **애니메이션**: requestAnimationFrame 기반 부드러운 토글
- **레벨 생성**: 역방향 생성 (해결 상태에서 랜덤 탭 → 퍼즐 생성)
- **로컬 스토리지**: 진행도, 통계, 데일리 히스토리

---

## 상세 설계

### 시스템 설계

#### 게임 보드
- **그리드 크기**: 레벨에 따라 3×3 → 4×4 → 5×5 → 6×6 → 7×7
- **데이터 구조**: 2D 배열 `grid[row][col]` (값: 0=OFF, 1=ON)
- **상태 관리**: 불변 상태 + 히스토리 스택 (undo 지원)

#### 토글 로직
```
function toggle(grid, row, col):
  flip(grid, row, col)     // 자신
  flip(grid, row-1, col)   // 위
  flip(grid, row+1, col)   // 아래
  flip(grid, row, col-1)   // 왼쪽
  flip(grid, row, col+1)   // 오른쪽
  // 범위 밖은 무시
  moves++
  checkWin()  // 모든 셀 ON이면 승리
```

#### 레벨 생성 (역방향)
```
function generateLevel(size, difficulty, seed):
  RNG with seed
  start with ALL ON grid (= 해결 상태)
  apply random toggle N times (N = difficulty)
  record solution (역순 = 정답)
  return { grid, optimalMoves: N, starThresholds }
```
> 역방향 생성이므로 **항상 해결 가능 보장** + 최적해 자동 계산

#### 특수 셀 처리
```
function toggle(grid, row, col):
  cell = grid[row][col]
  if cell.type == 'locked': return  // 잠긴 셀은 직접 탭 불가
  if cell.type == 'rotate':
    flip diagonal neighbors instead of cross
  if cell.type == 'propagate':
    flip entire row AND column
  else:
    standard cross flip
```

#### 별점 기준
- ⭐⭐⭐: moves ≤ optimal
- ⭐⭐: moves ≤ optimal × 1.5
- ⭐: moves ≤ optimal × 2.5

### UI/UX 플로우

#### 메인 화면
```
┌──────────────────────┐
│    ✨ GLOW GRID ✨    │
│                      │
│  ▶ Campaign (Lv.23)  │
│  📅 Daily Challenge  │
│  🏆 Statistics       │
│  ⚙️ Settings         │
│                      │
│  🌙 Dark neon theme  │
└──────────────────────┘
```

#### 게임 플레이 화면
```
┌──────────────────────┐
│ Lv.15  Moves: 3/8    │
│ ⭐⭐⭐≤5 ⭐⭐≤7 ⭐≤12  │
├──────────────────────┤
│                      │
│    ⬛ 💡 ⬛ ⬛ 💡     │
│    💡 💡 ⬛ 💡 ⬛     │
│    ⬛ ⬛ 💡 ⬛ ⬛     │
│    💡 ⬛ ⬛ 💡 💡     │
│    ⬛ 💡 ⬛ ⬛ 💡     │
│                      │
├──────────────────────┤
│  ↩️ Undo (2)  💡 Hint│
└──────────────────────┘
```

#### 승리 연출
```
모든 셀 ON → 
1. 전체 그리드 밝기 펄스 (0.5s)
2. 외곽부터 네온 웨이브 확산 (1s)
3. 파티클 폭발 + 별점 표시
4. "Level Complete!" + 통계
```

### 밸런스 파라미터

| 레벨 범위 | 그리드 | 특수셀 | 최적해 | 난이도 |
|-----------|--------|--------|--------|--------|
| 1-5       | 3×3    | 없음   | 1-3    | 튜토리얼|
| 6-20      | 4×4    | 없음   | 3-6    | 쉬움   |
| 21-50     | 5×5    | 잠금   | 5-10   | 보통   |
| 51-80     | 5×5    | 회전   | 7-12   | 어려움 |
| 81-120    | 6×6    | 전파   | 8-15   | 하드   |
| 121+      | 7×7    | 혼합   | 10-20  | 마스터 |

| 파라미터 | 값 | 설명 |
|---------|-----|------|
| UNDO_LIMIT | 3/게임 | 무료 되돌리기 |
| HINT_COST | 광고 1회 | 최적 다음 탭 위치 |
| DAILY_SEED | YYYYMMDD | 글로벌 동일 퍼즐 |
| GLOW_DURATION | 300ms | ON 전환 애니메이션 |
| PARTICLE_COUNT | 12 | 셀 토글 시 파티클 수 |
| WIN_WAVE_SPEED | 100ms/셀 | 승리 웨이브 속도 |

### 글로우 효과 상세
- **OFF 셀**: 어두운 회색 (#1a1a2e), 미세한 내부 테두리
- **ON 셀**: 네온 컬러 (#00ff88), radialGradient 글로우
- **탭 이펙트**: 확산 리플 (원형 파동)
- **배경**: 다크 (#0a0a1a), 미세한 그리드 라인
- **테마**: 기본(그린), 사이버핑크, 오션블루, 선셋오렌지

### 사운드 디자인 (선택적)
- 셀 토글: 부드러운 "틱" (높낮이 변화)
- 승리: 상승 아르페지오 + 글로우 사운드
- 힌트: 부드러운 차임
- BGM: 없음 (퍼즐 집중)

---
*생성일: 2026-01-31*
*기반 트렌드: Pixel Flow 만족감, Stip 미니멀 넘버 퍼즐, 2026 코지/미니멀 트렌드*
*참고: Lights Out 퍼즐은 1990년대 Tiger Electronics에서 출시된 클래식 → 모바일 재해석 기회*

# 019. Ball Sort Puzzle

## 게임 컨셉
같은 색깔의 공들을 한 튜브에 모으는 정렬 퍼즐 게임. 단순하지만 중독성 있는 메카닉으로 2025-2026년 하이퍼캐주얼 시장에서 꾸준한 인기를 유지하는 장르.

## 핵심 메카닉
- **튜브 정렬**: 여러 튜브에 섞인 색깔 공들
- **이동 규칙**: 튜브 맨 위 공만 이동 가능, 같은 색 위에만 놓거나 빈 튜브로 이동
- **클리어 조건**: 모든 튜브가 단색으로 정렬
- **실행 취소**: 무제한 Undo로 실험 유도

## 타겟 유저
- 25-44세 여성 (캐주얼 퍼즐 주요 타겟)
- 출퇴근/대기 시간 활용 유저
- 논리 퍼즐 선호자

## 차별점
- **Cozy 테마**: 부드러운 파스텔 색상, 만족스러운 사운드
- **힌트 시스템**: 광고 시청으로 힌트 제공
- **무한 레벨**: 프로시저럴 레벨 생성
- **도전 모드**: 제한된 이동 횟수로 별 획득

## 수익 모델
- **배너 광고**: 하단 배너
- **보상형 광고**: 힌트, Undo 추가, 레벨 스킵
- **인앱 구매**: 광고 제거, 무제한 힌트 팩

## 기술 스택
- HTML5 Canvas
- Vanilla JavaScript
- CSS3 애니메이션
- LocalStorage (진행 저장)

---

## 시스템 설계

### 게임 오브젝트
```
Tube {
  balls: Color[]  // 최대 4개
  capacity: 4
}

Level {
  tubes: Tube[]
  colors: number  // 사용 색상 수
  emptyTubes: number  // 빈 튜브 수
}
```

### 레벨 생성 알고리즘
1. 색상 수 결정 (레벨에 따라 4~8개)
2. 튜브 수 = 색상 수 + 2 (빈 튜브)
3. 각 색상 4개씩 생성
4. 셔플 후 튜브에 배분
5. 해결 가능성 검증 (역추적 알고리즘)

### 게임 상태
```
GameState {
  level: number
  tubes: Tube[]
  moveHistory: Move[]
  stars: number
  hintsUsed: number
}
```

---

## UI/UX 플로우

### 메인 화면
```
┌─────────────────────┐
│    Ball Sort 🎯     │
│                     │
│   [▶ PLAY]         │
│   [⚙ Settings]     │
│                     │
│   Level: 42        │
│   ⭐⭐⭐ 126       │
└─────────────────────┘
```

### 게임 화면
```
┌─────────────────────┐
│ Lv.42  ↩️  💡  ⚙️   │
├─────────────────────┤
│                     │
│  ┃🔴┃ ┃🔵┃ ┃🟢┃    │
│  ┃🔵┃ ┃🔴┃ ┃🔴┃    │
│  ┃🟢┃ ┃🟢┃ ┃🔵┃    │
│  ┃🟢┃ ┃🔵┃ ┃🔴┃    │
│  ┗━━┛ ┗━━┛ ┗━━┛    │
│                     │
│  ┃  ┃ ┃  ┃         │
│  ┃  ┃ ┃  ┃         │
│  ┃  ┃ ┃  ┃         │
│  ┃  ┃ ┃  ┃         │
│  ┗━━┛ ┗━━┛         │
│                     │
├─────────────────────┤
│      [Banner Ad]    │
└─────────────────────┘
```

### 인터랙션
1. 튜브 탭 → 선택 (하이라이트)
2. 다른 튜브 탭 → 이동 시도
3. 불가능 시 → 흔들림 피드백
4. 이동 성공 → 부드러운 애니메이션

---

## 밸런스 파라미터

| 레벨 | 색상 수 | 빈 튜브 | 목표 이동 (⭐⭐⭐) |
|------|---------|---------|-------------------|
| 1-10 | 4 | 2 | 15 |
| 11-30 | 5 | 2 | 20 |
| 31-60 | 6 | 2 | 28 |
| 61-100 | 7 | 2 | 35 |
| 100+ | 8 | 2 | 45 |

### 보상 구조
- 레벨 클리어: +10 코인
- ⭐⭐⭐ 클리어: +20 코인 보너스
- 힌트 비용: 50 코인 또는 광고
- Undo: 무료 (무제한)

### 난이도 곡선
- 초반 10레벨: 튜토리얼급 쉬움
- 중반: 점진적 색상 추가
- 후반: 최적 경로 찾기 도전

---

## 구현 우선순위
1. 기본 튜브 렌더링 + 공 표시
2. 탭 선택 + 이동 로직
3. 클리어 판정 + 레벨 진행
4. Undo 시스템
5. 레벨 생성 알고리즘
6. 힌트 시스템
7. 별 시스템 + 진행 저장

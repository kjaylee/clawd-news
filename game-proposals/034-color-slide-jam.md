# 034. Color Slide Jam - 컬러 슬라이드 잼

## 게임 컨셉
**한 줄 요약:** 색깔 블록을 슬라이드시켜 같은 색 도어로 보내는 전략 퍼즐

2025년 iOS 30M 다운로드를 기록한 "Color Block Jam" 벤치마크. 그리드 위의 색깔 블록을 상하좌우로 슬라이드하여 같은 색의 도어(출구)로 보내 제거하는 퍼즐 게임. 단순한 조작이지만, 장애물과 이동 순서에 따라 전략적 사고가 필요.

## 핵심 메카닉
1. **블록 슬라이드**: 블록을 탭/스와이프하면 해당 방향으로 벽 또는 장애물까지 슬라이드
2. **색상 도어 매칭**: 블록이 같은 색 도어에 도달하면 흡수되어 제거
3. **순서 퍼즐**: 블록 이동 순서가 핵심 — 잘못된 순서면 막힘
4. **장애물 시스템**: 벽, 얼음, 체인, 회전판 등으로 난이도 점진 증가
5. **별 평가**: 최소 이동 수로 클리어 시 3스타

## 장애물 종류
- **벽 블록 🧱**: 이동 불가, 경로 차단
- **얼음판 ❄️**: 블록이 미끄러져 멈추지 않고 추가 이동
- **체인 블록 ⛓️**: 인접 블록 먼저 제거해야 해제
- **회전판 🔄**: 블록 진입 시 90도 방향 전환
- **텔레포터 🌀**: 블록을 다른 위치로 순간이동
- **잠금 도어 🔒**: 열쇠 블록 먼저 보내야 개방

## 타겟 유저
- 25-50세 캐주얼 게이머 (특히 여성 비중 높음)
- 퍼즐 게임 팬 (소코반, 슬라이드 퍼즐 유저)
- 짧은 세션 (2-5분) 플레이어
- 논리적 사고를 즐기는 유저

## 차별점
1. **깔끔한 미니멀 디자인**: 파스텔톤 + 부드러운 애니메이션
2. **되돌리기 무제한**: 실험적 플레이 장려 (광고 없이)
3. **레벨 에디터**: 유저가 레벨 만들고 공유 (추후)
4. **일일 퍼즐**: 매일 새 퍼즐 1개 (리텐션)
5. **진행 지도**: 월드맵 스타일 레벨 선택

## 수익 모델
- **보상형 광고 (IAA)**: 힌트 사용, 추가 도움
- **삽입 광고**: 5스테이지마다 (스킵 가능)
- **인앱 구매**: 
  - 광고 제거: $2.99
  - 힌트 팩 (50개): $1.99
  - 테마 팩 (비주얼 스킨): $0.99
- **배틀패스**: 시즌 보상 트랙 (무료/유료)

## 기술 스택
- **엔진**: HTML5 Canvas + Vanilla JavaScript
- **렌더링**: CSS Grid + Canvas 하이브리드 (그리드 기반이므로 CSS Grid 최적)
- **애니메이션**: requestAnimationFrame + CSS transition
- **저장**: localStorage (진행도, 설정)
- **배포**: GitHub Pages → 텔레그램 Mini App

---

## 시스템 설계

### 레벨 데이터 구조
```javascript
const level = {
  id: 1,
  gridSize: { cols: 5, rows: 7 },
  blocks: [
    { id: 'b1', color: 'red', x: 1, y: 2 },
    { id: 'b2', color: 'blue', x: 3, y: 4 },
    { id: 'b3', color: 'red', x: 0, y: 5 },
  ],
  doors: [
    { color: 'red', x: 4, y: 0, direction: 'right' },
    { color: 'blue', x: 2, y: 6, direction: 'down' },
  ],
  obstacles: [
    { type: 'wall', x: 2, y: 2 },
    { type: 'ice', x: 1, y: 3 },
    { type: 'chain', x: 3, y: 3, linkedTo: 'b2' },
  ],
  minMoves: 8,  // 3스타 기준
  par: 12,      // 2스타 기준
};
```

### 게임 상태 머신
```
MENU → LEVEL_SELECT → PLAYING → 
  ├── ANIMATING (블록 이동 중)
  ├── CHECKING (도어 매칭 체크)
  ├── CLEARED (레벨 클리어)
  └── STUCK (더 이상 움직일 수 없음)
```

### 블록 이동 로직
```javascript
function moveBlock(block, direction) {
  const dx = { left: -1, right: 1, up: 0, down: 0 }[direction];
  const dy = { left: 0, right: 0, up: -1, down: 1 }[direction];
  
  let nx = block.x + dx;
  let ny = block.y + dy;
  
  // 벽/장애물/다른 블록까지 슬라이드
  while (isValidPosition(nx, ny) && !isBlocked(nx, ny)) {
    // 도어 체크
    const door = getDoorAt(nx, ny);
    if (door && door.color === block.color) {
      // 블록 흡수 → 제거
      removeBlock(block);
      activateDoor(door);
      return;
    }
    
    // 특수 타일 체크
    const tile = getTileAt(nx, ny);
    if (tile?.type === 'ice') {
      // 미끄러짐 — 멈추지 않고 계속
      nx += dx; ny += dy;
      continue;
    }
    if (tile?.type === 'rotator') {
      // 방향 전환
      [dx, dy] = rotateDirection(dx, dy);
    }
    
    nx += dx;
    ny += dy;
  }
  
  // 최종 위치 (벽/장애물 직전)
  block.x = nx - dx;
  block.y = ny - dy;
}
```

### 레벨 생성 시스템
- 레벨 1-20: 수동 설계 (튜토리얼, 점진적 메카닉 소개)
- 레벨 21-50: 반자동 (패턴 + 랜덤 변형)
- 레벨 50+: 프로시저럴 생성 (solver로 풀 수 있는지 검증)

### 레벨 난이도 곡선
```
Level 1-5:    2색, 벽 없음, 블록 2-3개 (튜토리얼)
Level 6-15:   2-3색, 벽 블록 등장, 블록 3-5개
Level 16-30:  3-4색, 얼음판 등장, 블록 4-6개
Level 31-50:  4-5색, 체인 블록 등장, 블록 5-8개
Level 51-80:  5-6색, 회전판 + 텔레포터, 블록 6-10개
Level 81-100: 모든 장애물 조합, 잠금 도어, 블록 8-12개
Level 100+:   프로시저럴 생성, 무한
```

---

## UI/UX 플로우

### 메인 화면
```
┌─────────────────────┐
│  🎨 Color Slide Jam │
│                     │
│    [▶ PLAY]         │
│    [📅 Daily]       │
│    [🏆 Stars: 142]  │
│                     │
│   Level 35          │
└─────────────────────┘
```

### 레벨 선택 (월드맵 스타일)
```
┌─────────────────────┐
│  World 1: Garden    │
│                     │
│  ⭐⭐⭐  ⭐⭐☆  ⭐☆☆  │
│  [1] ─ [2] ─ [3]   │
│              │      │
│  [6] ─ [5] ─ [4]   │
│  │                  │
│  [7] ─ [8] ─ [9]   │
│              │      │
│  🔒  ─ 🔒  ─ [10]  │
└─────────────────────┘
```

### 게임 화면
```
┌─────────────────────┐
│ Lv.35  ↩️  💡  ⭐x2 │
├─────────────────────┤
│  🚪     ·  ·  ·  🚪│  ← 빨강 도어, 파랑 도어
│  (R)    ·  ·  ·  (B)│
│  ·  ·  🧱  ·  ·  · │
│  ·  🟥  ·  🟦  ·  · │  ← 빨강 블록, 파랑 블록
│  ·  ·  ·  ·  🧱  · │
│  ·  🟦  ·  🟥  ·  · │
│  ·  ·  ·  ·  ·  · │
├─────────────────────┤
│  Moves: 5/8  ⭐⭐⭐  │
└─────────────────────┘
```

### 인터랙션
1. 블록 탭 → 이동 가능 방향 하이라이트
2. 방향 스와이프/탭 → 블록 슬라이드 (부드러운 애니메이션)
3. 도어 도달 → 흡수 이펙트 + 사운드
4. 모든 블록 제거 → 클리어! (별 평가)
5. 되돌리기 (↩️) → 무제한 (광고 없음)
6. 힌트 (💡) → 다음 최적 이동 표시 (유료/광고)

---

## 밸런스 파라미터

```javascript
const BALANCE = {
  // 그리드
  grid: {
    minSize: 5,           // 최소 그리드 크기
    maxSize: 8,           // 최대 그리드 크기
    cellSize: 60,         // 셀 크기 (px)
  },

  // 별 평가
  stars: {
    three: 1.0,           // 최소 이동 수 × 배율
    two: 1.5,             // par 이내
    one: 999,             // 클리어만 하면
  },

  // 장애물 해금 레벨
  obstacleUnlock: {
    wall: 6,
    ice: 16,
    chain: 31,
    rotator: 51,
    teleporter: 61,
    lockedDoor: 81,
  },

  // 힌트
  hint: {
    freePerDay: 3,        // 일일 무료 힌트
    adReward: 2,          // 광고 시청 보상
    iapPack: 50,          // IAP 힌트 팩
  },

  // 광고
  ads: {
    interstitialInterval: 5,  // N스테이지마다
    rewardedForHint: true,
  },

  // 색상 팔레트
  colors: ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FECA57', '#FF9FF3'],
  colorNames: ['red', 'teal', 'blue', 'green', 'yellow', 'pink'],
};
```

---

## 구현 우선순위

### MVP (핵심, 1차)
1. 그리드 렌더링 + 블록/도어 표시
2. 블록 탭 → 방향 선택 → 슬라이드 이동
3. 도어 매칭 → 블록 제거
4. 클리어/실패 판정
5. 수동 설계 레벨 20개
6. 기본 UI (점수, 이동 수, 별)

### 폴리시 (2차)
7. 부드러운 슬라이드 애니메이션
8. 되돌리기 기능 (undo stack)
9. 벽 블록 장애물
10. 레벨 선택 화면
11. 진행도 저장 (localStorage)

### 확장 (3차)
12. 얼음, 체인, 회전판 장애물
13. 힌트 시스템
14. 일일 퍼즐
15. 사운드 이펙트
16. 텔레그램 Mini App 통합

---
*생성일: 2026-01-31*
*기반 트렌드: Color Block Jam (iOS 30M DL), 슬라이드 퍼즐 장르 성장*

# 025 — Mahjong Zen (마작 선)

## 🎯 게임 컨셉
미니멀 디자인의 마작 솔리테어. 전통 마작 타일을 현대적 젠 스타일로 재해석. 릴랙싱하면서도 전략적인 타일 매칭 퍼즐.

**장르:** 퍼즐 / 캐주얼
**영감:** Vita Mahjong (2025 글로벌 #6, 119M DL), Mahjong Solitaire Classic
**차별점:** 미니멀 젠 미학 + 프로그레시브 난이도 + 일일 챌린지 시스템

## 🎮 핵심 메카닉
- **타일 매칭:** 같은 무늬의 자유 타일(좌우 하나 이상 열림) 2개를 탭하여 제거
- **자유 타일 판정:** 좌 또는 우가 비어있고, 위에 타일이 없는 경우
- **승리 조건:** 모든 타일 제거
- **패배 조건:** 가능한 매치가 없을 때 (힌트/셔플 제공)

## 🏗️ 시스템 설계

### 타일 세트
- 4종 수트 (대나무, 동전, 만, 바람) × 9 = 36종
- 각 종류 4개씩 = 144개 타일
- 간소화 버전: 6종 심볼 × 4개 = 24~48개 (초기 레벨)

### 레이아웃 시스템
- **레벨 1-5:** Turtle (기본, 5층)
- **레벨 6-10:** Cross (십자형)
- **레벨 11-15:** Bridge (다리형)
- **레벨 16-20:** Pyramid (피라미드)
- **레벨 21+:** 랜덤 생성 레이아웃

### 타일 배치 알고리즘
1. 레이아웃 형태 선택
2. 역순으로 매칭 가능한 쌍 배치 (항상 풀이 보장)
3. 난이도에 따라 심볼 종류 수 조절

### 보조 기능
- **힌트 (💡):** 매칭 가능한 쌍 하이라이트 (3회/게임)
- **셔플 (🔄):** 남은 타일 재배치 (1회/게임)
- **실행 취소 (↩️):** 마지막 매치 취소 (무제한)

### 진행 시스템
- 20+ 레벨 (점진적 난이도 증가)
- 별점 시스템 (시간/힌트 사용에 따라 ★1-3)
- 레벨 클리어 시 젠 명언 표시

## 🎨 비주얼 & UI

### 색상 팔레트 (젠 테마)
- 배경: #1a1a2e (딥 네이비) → #16213e (인디고)
- 타일: #e8d5b7 (아이보리) / #f0e6d2 (크림)
- 타일 심볼: 
  - 🎋 대나무 (#4a7c59)
  - 🪙 동전 (#c9a959) 
  - 💎 보석 (#5b8fb9)
  - 🌸 꽃 (#c97b84)
  - 🔥 불 (#d45d47)
  - 🌊 물 (#4a90b5)
- 강조: #e94560 (매치 시)

### UI 레이아웃
```
┌──────────────────────────┐
│  LV.3  ⏱ 2:34  ★★☆     │
├──────────────────────────┤
│                          │
│     ┌─┐┌─┐┌─┐          │
│    ┌┤🎋├┤💎├┤🌸├┐        │
│   ┌┤├─┤├─┤├─┤├┐       │
│  ┌┤🪙├┤🔥├┤🌊├┤🎋├┐     │
│  │├─┤├─┤├─┤├─┤│     │
│  └┤🌸├┤🎋├┤💎├┤🔥├┘     │
│   └┤├─┤├─┤├─┤┘       │
│    └┤🌊├┤🪙├┤🌸├┘        │
│     └─┘└─┘└─┘          │
│                          │
├──────────────────────────┤
│  💡 3  🔄 1  ↩️  Score: 240│
└──────────────────────────┘
```

### 애니메이션
- 타일 매치 시: 스케일 업 → 파티클 → 페이드 아웃 (300ms)
- 타일 선택 시: 글로우 이펙트 + 미세한 바운스
- 레벨 클리어: 물결 효과 + 축하 파티클
- 배경: 느린 그라디언트 애니메이션

## 🎯 타겟 유저
- **핵심:** 25-55세 캐주얼 게이머
- **특성:** 마작/보드게임 애호가, 릴랙싱 게임 선호
- **세션:** 5-15분 (출퇴근/대기 시간)

## 💰 수익 모델
1. **리워드 광고:** 추가 힌트/셔플 (0.3~0.5 eCPM)
2. **IAP (미래):** 테마 팩, 무제한 힌트, 광고 제거
3. **일일 챌린지:** 특수 레이아웃으로 리텐션 강화

## ⚙️ 기술 스택
- **엔진:** 순수 HTML5 Canvas + JavaScript
- **렌더링:** 2D Canvas API (타일 그리기)
- **상태 관리:** 레이아웃 배열 + 스택 기반 undo
- **저장:** localStorage (진행 상태, 최고 점수)
- **사이즈:** 단일 HTML 파일, < 100KB

## 📊 밸런스 파라미터
```javascript
const BALANCE = {
  // 타일
  symbolTypes: [4, 5, 6, 7, 8],  // 레벨별 심볼 종류
  tilesPerLevel: [24, 36, 48, 72, 96, 144], // 레벨별 타일 수
  
  // 보조
  hintsPerGame: 3,
  shufflesPerGame: 1,
  
  // 스코어링
  matchScore: 20,
  timeBonus: 500,      // 시간 내 클리어 시
  comboMultiplier: 1.5, // 연속 매치
  
  // 별점
  star3Time: 60,   // 3성 기준 (초)
  star2Time: 120,  // 2성 기준
  star1Time: 999,  // 1성 (클리어만 하면)
  
  // 난이도
  levelProgressCurve: 'logarithmic'
};
```

## 📋 구현 우선순위
1. 타일 렌더링 + 3D 스택 효과
2. 자유 타일 판정 + 매칭 로직
3. 풀이 보장 타일 배치 알고리즘
4. 힌트/셔플/실행취소
5. 레벨 시스템 + 진행 저장
6. 애니메이션 + 파티클
7. 일일 챌린지 (선택)

---
*생성일: 2026-01-30 | 트렌드 기반: Vita Mahjong 글로벌 119M DL*

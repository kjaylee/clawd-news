<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
<title>Pinball Arcade üïπÔ∏è</title>
<meta name="description" content="ÎÑ§Ïò® ÌïÄÎ≥º! ÌîåÎ¶¨ÌçºÎ°ú Í≥µÏùÑ ÌäïÍ∏∞Í≥† Î≤îÌçºÎ•º ÎßûÌòÄ ÏµúÍ≥† Ï†êÏàòÏóê ÎèÑÏ†Ñ!">
<meta property="og:title" content="Pinball Arcade üïπÔ∏è ‚Äî East Sea Games">
<meta property="og:description" content="ÎÑ§Ïò® ÌïÄÎ≥º ÏïÑÏºÄÏù¥Îìú! ÌîåÎ¶¨ÌçºÎ°ú Í≥µÏùÑ ÌäïÍ∏∞Í≥† Ï†êÏàòÎ•º ÏåìÏïÑÎùº!">
<meta property="og:image" content="https://eastsea.monster/games/pinball-arcade/og.png">
<meta property="og:url" content="https://eastsea.monster/games/pinball-arcade/">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary_large_image">
<link rel="canonical" href="https://eastsea.monster/games/pinball-arcade/">
<link rel="manifest" href="/games/manifest.json">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"VideoGame","name":"Pinball Arcade",
"url":"https://eastsea.monster/games/pinball-arcade/",
"description":"ÎÑ§Ïò® ÌïÄÎ≥º! ÌîåÎ¶¨ÌçºÎ°ú Í≥µÏùÑ ÌäïÍ∏∞Í≥† Î≤îÌçºÎ•º ÎßûÌòÄ ÏµúÍ≥† Ï†êÏàòÏóê ÎèÑÏ†Ñ!",
"gamePlatform":["Web Browser","Mobile Browser"],"applicationCategory":"Game",
"genre":"Arcade","operatingSystem":"Any","inLanguage":["ko","en","ja"],
"offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},
"author":{"@type":"Person","name":"Jay Lee","url":"https://eastsea.monster"}}
</script>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{width:100%;height:100%;overflow:hidden;font-family:'Segoe UI',system-ui,-apple-system,sans-serif;background:#0a0a1a;color:#e0e0e0;user-select:none}
:root{--safe-top:0px;--safe-bottom:0px;--neon1:#ff006e;--neon2:#00f5d4;--neon3:#fee440;--neon4:#9b5de5;--blue:#4ea8ff}
body{display:flex;flex-direction:column;align-items:center;padding-top:var(--safe-top);padding-bottom:var(--safe-bottom)}
#app{width:100%;max-width:420px;height:100%;display:flex;flex-direction:column}
.header{display:flex;justify-content:space-between;align-items:center;padding:8px 16px}
.title{font-size:16px;font-weight:700;color:var(--neon2)}
.hstats{display:flex;gap:14px}
.hs{text-align:center}
.hs-l{font-size:9px;opacity:0.5;text-transform:uppercase;letter-spacing:1px}
.hs-v{font-size:18px;font-weight:800;color:#fff}
.balls-display{text-align:center;font-size:14px;color:var(--neon3);padding:2px}
.canvas-area{flex:1;display:flex;align-items:center;justify-content:center;touch-action:none}
canvas{border-radius:12px}
.controls{display:flex;justify-content:space-between;padding:0 8px 12px;gap:8px}
.flip-btn{flex:1;padding:18px;border:none;border-radius:14px;font-size:18px;font-weight:800;cursor:pointer;min-height:56px;transition:all 0.1s}
.flip-btn:active{transform:scale(0.95)}
.flip-left{background:linear-gradient(135deg,var(--neon1),#cc0058);color:#fff}
.flip-right{background:linear-gradient(135deg,var(--neon2),#00c4a8);color:#111}
.launch-btn{padding:18px 24px;border:none;border-radius:14px;font-size:16px;font-weight:700;background:var(--neon3);color:#111;cursor:pointer;min-height:56px}
.launch-btn:active{transform:scale(0.95)}
.modal-bg{position:fixed;inset:0;background:rgba(0,0,0,0.7);display:flex;align-items:center;justify-content:center;z-index:100;backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px)}
.modal{background:#16213e;border-radius:20px;padding:28px 24px;text-align:center;width:min(85vw,320px);border:1px solid rgba(255,255,255,0.1)}
.modal h2{font-size:24px;margin-bottom:8px;color:var(--neon2)}
.modal .big{font-size:48px;font-weight:800;color:#fff;margin:12px 0}
.modal .sub{font-size:14px;opacity:0.7;margin-bottom:16px}
.modal .new-best{color:var(--neon3);font-size:16px;font-weight:700}
.mbtn{width:100%;padding:14px;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;margin-top:8px;min-height:48px}
.mbtn:active{transform:scale(0.95)}
.mbtn-p{background:var(--neon2);color:#111}
.mbtn-s{background:rgba(255,255,255,0.1);color:#e0e0e0;border:1px solid rgba(255,255,255,0.15)}
</style>
</head>
<body>
<div id="app">
<div class="header">
<div class="title">üïπÔ∏è Pinball</div>
<div class="hstats">
<div class="hs"><div class="hs-l" data-i18n="score">SCORE</div><div class="hs-v" id="scoreVal">0</div></div>
<div class="hs"><div class="hs-l" data-i18n="best">BEST</div><div class="hs-v" id="bestVal">0</div></div>
</div>
</div>
<div class="balls-display" id="ballsDisplay"></div>
<div class="canvas-area"><canvas id="cv"></canvas></div>
<div class="controls">
<button class="flip-btn flip-left" id="flipL" data-i18n="left">‚óÄ LEFT</button>
<button class="launch-btn" id="launchBtn" data-i18n="launch">üöÄ</button>
<button class="flip-btn flip-right" id="flipR" data-i18n="right">RIGHT ‚ñ∂</button>
</div>
</div>
<div class="modal-bg" id="modalBg" style="display:none">
<div class="modal">
<h2 id="mTitle" data-i18n="gameOver">Game Over</h2>
<div class="big" id="mScore">0</div>
<div class="sub" id="mSub"></div>
<div id="mBest" class="new-best" style="display:none"></div>
<button class="mbtn mbtn-p" id="mReplay" data-i18n="replay">Play Again</button>
<button class="mbtn mbtn-s" id="mShare" data-i18n="share">Share</button>
</div>
</div>
<script src="/games/tg-sdk-wrapper.js"></script>
<script>
(function(){
'use strict';
const I18N={
ko:{score:'Ï†êÏàò',best:'ÏµúÍ≥†',left:'‚óÄ ÏôºÏ™Ω',right:'Ïò§Î•∏Ï™Ω ‚ñ∂',launch:'üöÄ',gameOver:'Í≤åÏûÑ Ïò§Î≤Ñ',replay:'Îã§ÏãúÌïòÍ∏∞',share:'Í≥µÏú†',newBest:'üèÜ ÏÉà ÏµúÍ≥†Í∏∞Î°ù!',ball:'Í≥µ',balls:'Í≥µ ÎÇ®Ïùå',multi:'Î∞∞Ïàò'},
en:{score:'SCORE',best:'BEST',left:'‚óÄ LEFT',right:'RIGHT ‚ñ∂',launch:'üöÄ',gameOver:'Game Over',replay:'Play Again',share:'Share',newBest:'üèÜ New Best!',ball:'Ball',balls:'balls left',multi:'Multi'},
ja:{score:'„Çπ„Ç≥„Ç¢',best:'„Éô„Çπ„Éà',left:'‚óÄ Â∑¶',right:'Âè≥ ‚ñ∂',launch:'üöÄ',gameOver:'„Ç≤„Éº„É†„Ç™„Éº„Éê„Éº',replay:'„ÇÇ„ÅÜ‰∏ÄÂ∫¶',share:'„Ç∑„Çß„Ç¢',newBest:'üèÜ Êñ∞Ë®òÈå≤ÔºÅ',ball:'„Éú„Éº„É´',balls:'ÊÆã„Çä',multi:'„Éû„É´„ÉÅ'}
};
const ulang=(window.TG?.getLang?.()||navigator.language||'en').slice(0,2);
const lang=['ko','ja'].includes(ulang)?ulang:'en';
const t=k=>I18N[lang]?.[k]||I18N.en[k]||k;
document.querySelectorAll('[data-i18n]').forEach(el=>{const k=el.dataset.i18n;if(t(k))el.textContent=t(k)});

const cv=document.getElementById('cv');
const ctx=cv.getContext('2d');
const W=Math.min(window.innerWidth,420)-16;
const H=Math.min(window.innerHeight-200,W*1.5);
cv.width=W;cv.height=H;

const GRAVITY=0.15;
const FRICTION=0.999;
const BALL_R=W*0.02;
const FLIPPER_L=W*0.16;
const FLIPPER_W=W*0.025;
const BUMPER_R=W*0.04;
const MAX_BALLS=3;

let score=0,best=0,balls=MAX_BALLS,multi=1,gameActive=true;
let ball={x:W*0.9,y:H*0.5,vx:0,vy:0,active:false};
let leftFlip=0,rightFlip=0; // angle offset
let leftDown=false,rightDown=false;
let launched=false;

// Bumpers
const bumpers=[
{x:W*0.3,y:H*0.2,r:BUMPER_R,color:'#ff006e',pts:100,hit:0},
{x:W*0.6,y:H*0.18,r:BUMPER_R,color:'#00f5d4',pts:100,hit:0},
{x:W*0.45,y:H*0.33,r:BUMPER_R,color:'#fee440',pts:150,hit:0},
{x:W*0.2,y:H*0.4,r:BUMPER_R*0.8,color:'#9b5de5',pts:200,hit:0},
{x:W*0.7,y:H*0.38,r:BUMPER_R*0.8,color:'#4ea8ff',pts:200,hit:0},
{x:W*0.45,y:H*0.12,r:BUMPER_R*0.7,color:'#ff006e',pts:300,hit:0}
];

// Walls/guides
const walls=[
{x1:0,y1:0,x2:0,y2:H},
{x1:W,y1:0,x2:W,y2:H},
{x1:0,y1:0,x2:W,y2:0},
// Angled walls
{x1:0,y1:H*0.6,x2:W*0.15,y2:H*0.75},
{x1:W,y1:H*0.6,x2:W*0.85,y2:H*0.75},
];

// Flipper positions
const flipperL={x:W*0.28,y:H*0.85,angle:0.3};
const flipperR={x:W*0.72,y:H*0.85,angle:Math.PI-0.3};

function drawTable(){
// Background gradient
const grad=ctx.createLinearGradient(0,0,0,H);
grad.addColorStop(0,'#0a0a2e');
grad.addColorStop(1,'#1a0a2e');
ctx.fillStyle=grad;
ctx.fillRect(0,0,W,H);

// Grid lines
ctx.strokeStyle='rgba(255,255,255,0.03)';
ctx.lineWidth=1;
for(let i=0;i<W;i+=W/10){ctx.beginPath();ctx.moveTo(i,0);ctx.lineTo(i,H);ctx.stroke()}
for(let i=0;i<H;i+=H/15){ctx.beginPath();ctx.moveTo(0,i);ctx.lineTo(W,i);ctx.stroke()}

// Walls
ctx.strokeStyle='rgba(255,255,255,0.3)';
ctx.lineWidth=3;
walls.forEach(w=>{
ctx.beginPath();ctx.moveTo(w.x1,w.y1);ctx.lineTo(w.x2,w.y2);ctx.stroke();
});

// Drain zone indicator
ctx.fillStyle='rgba(233,69,96,0.1)';
ctx.fillRect(W*0.15,H-8,W*0.7,8);

// Launch lane
ctx.fillStyle='rgba(78,168,255,0.1)';
ctx.fillRect(W*0.85,0,W*0.15,H);
ctx.strokeStyle='rgba(78,168,255,0.3)';
ctx.beginPath();ctx.moveTo(W*0.85,0);ctx.lineTo(W*0.85,H);ctx.stroke();
}

function drawBumper(b){
ctx.save();
const glow=b.hit>0?1:0;
if(glow){
ctx.shadowColor=b.color;
ctx.shadowBlur=20+b.hit*5;
b.hit=Math.max(0,b.hit-0.5);
}
ctx.beginPath();
ctx.arc(b.x,b.y,b.r,0,Math.PI*2);
ctx.fillStyle=b.color+'88';
ctx.fill();
ctx.strokeStyle=b.color;
ctx.lineWidth=2;
ctx.stroke();
// Inner
ctx.beginPath();
ctx.arc(b.x,b.y,b.r*0.6,0,Math.PI*2);
ctx.fillStyle=b.color;
ctx.fill();
// Points text
ctx.fillStyle='#fff';
ctx.font='bold '+Math.floor(b.r*0.6)+'px sans-serif';
ctx.textAlign='center';ctx.textBaseline='middle';
ctx.fillText(b.pts,b.x,b.y);
ctx.restore();
}

function drawFlipper(f,angle,color){
ctx.save();
ctx.translate(f.x,f.y);
ctx.rotate(angle);
ctx.beginPath();
ctx.moveTo(0,-FLIPPER_W/2);
ctx.lineTo(FLIPPER_L,-FLIPPER_W/3);
ctx.lineTo(FLIPPER_L,FLIPPER_W/3);
ctx.lineTo(0,FLIPPER_W/2);
ctx.closePath();
ctx.fillStyle=color;
ctx.fill();
ctx.shadowColor=color;
ctx.shadowBlur=10;
ctx.strokeStyle='#fff';
ctx.lineWidth=1;
ctx.stroke();
// Pivot
ctx.beginPath();ctx.arc(0,0,FLIPPER_W*0.6,0,Math.PI*2);
ctx.fillStyle='#fff';ctx.fill();
ctx.restore();
}

function drawBall(){
if(!ball.active)return;
ctx.save();
ctx.shadowColor='#fff';
ctx.shadowBlur=15;
ctx.beginPath();
ctx.arc(ball.x,ball.y,BALL_R,0,Math.PI*2);
const grad=ctx.createRadialGradient(ball.x-BALL_R*0.3,ball.y-BALL_R*0.3,BALL_R*0.1,ball.x,ball.y,BALL_R);
grad.addColorStop(0,'#ffffff');
grad.addColorStop(1,'#c0c0c0');
ctx.fillStyle=grad;
ctx.fill();
ctx.restore();
}

function drawMulti(){
if(multi>1){
ctx.fillStyle='rgba(254,228,64,0.8)';
ctx.font='bold 14px sans-serif';
ctx.textAlign='center';
ctx.fillText(t('multi')+' x'+multi,W/2,H*0.08);
}
}

function render(){
ctx.clearRect(0,0,W,H);
drawTable();
bumpers.forEach(drawBumper);
// Flippers
const lAngle=0.3-leftFlip*0.5;
const rAngle=Math.PI-0.3+rightFlip*0.5;
drawFlipper(flipperL,lAngle,'#ff006e');
drawFlipper({x:flipperR.x,y:flipperR.y},rAngle,'#00f5d4');
drawBall();
drawMulti();
}

function physics(){
if(!ball.active)return;
// Gravity
ball.vy+=GRAVITY;
ball.vx*=FRICTION;
ball.vy*=FRICTION;
ball.x+=ball.vx;
ball.y+=ball.vy;
// Speed cap
const spd=Math.hypot(ball.vx,ball.vy);
if(spd>15){ball.vx=ball.vx/spd*15;ball.vy=ball.vy/spd*15}

// Wall collisions
if(ball.x<BALL_R){ball.x=BALL_R;ball.vx*=-0.8}
if(ball.x>W-BALL_R){ball.x=W-BALL_R;ball.vx*=-0.8}
if(ball.y<BALL_R){ball.y=BALL_R;ball.vy*=-0.8}

// Bumper collisions
bumpers.forEach(b=>{
const dx=ball.x-b.x,dy=ball.y-b.y;
const d=Math.hypot(dx,dy);
if(d<b.r+BALL_R){
const nx=dx/d,ny=dy/d;
ball.x=b.x+nx*(b.r+BALL_R+1);
ball.y=b.y+ny*(b.r+BALL_R+1);
const speed=Math.hypot(ball.vx,ball.vy);
ball.vx=nx*Math.max(speed,4);
ball.vy=ny*Math.max(speed,4);
b.hit=10;
addScore(b.pts);
window.TG?.haptic?.('impact','medium');
}
});

// Flipper collisions (simplified)
checkFlipperHit(flipperL,0.3-leftFlip*0.5,1);
checkFlipperHit(flipperR,Math.PI-0.3+rightFlip*0.5,-1);

// Angled walls
walls.slice(3).forEach(w=>{
const wx=w.x2-w.x1,wy=w.y2-w.y1;
const wl=Math.hypot(wx,wy);
const nx=-wy/wl,ny=wx/wl;
const dx=ball.x-w.x1,dy=ball.y-w.y1;
const dot=dx*nx+dy*ny;
if(Math.abs(dot)<BALL_R){
const t2=(dx*wx+dy*wy)/(wl*wl);
if(t2>=0&&t2<=1){
ball.x+=nx*(BALL_R-dot);
ball.y+=ny*(BALL_R-dot);
const vdot=ball.vx*nx+ball.vy*ny;
ball.vx-=2*vdot*nx;
ball.vy-=2*vdot*ny;
ball.vx*=0.85;ball.vy*=0.85;
}
}
});

// Drain
if(ball.y>H+BALL_R){
ball.active=false;
balls--;
multi=1;
document.getElementById('ballsDisplay').textContent='üî¥'.repeat(balls)+'‚ö´'.repeat(MAX_BALLS-balls)+' '+balls+' '+t('balls');
if(balls<=0)endGame();
else{
setTimeout(()=>{
ball.x=W*0.9;ball.y=H*0.5;ball.vx=0;ball.vy=0;
launched=false;
},500);
}
window.TG?.haptic?.('notification','warning');
}
}

function checkFlipperHit(f,angle,dir){
const cos=Math.cos(angle),sin=Math.sin(angle);
const tipX=f.x+cos*FLIPPER_L;
const tipY=f.y+sin*FLIPPER_L;
// Simple line collision
const dx=tipX-f.x,dy=tipY-f.y;
const len=Math.hypot(dx,dy);
const nx=-dy/len,ny=dx/len;
const bx=ball.x-f.x,by=ball.y-f.y;
const dot=bx*nx+by*ny;
const proj=(bx*dx+by*dy)/(len*len);
if(Math.abs(dot)<BALL_R+FLIPPER_W/2&&proj>=0&&proj<=1){
ball.x+=nx*(BALL_R+FLIPPER_W/2-dot)*Math.sign(dot);
ball.y+=ny*(BALL_R+FLIPPER_W/2-dot)*Math.sign(dot);
const isActive=(dir>0?leftDown:rightDown);
const hitForce=isActive?8:3;
ball.vx=nx*hitForce*(0.8+Math.random()*0.4);
ball.vy=-Math.abs(ny*hitForce)-(isActive?2:0);
if(isActive){
window.TG?.haptic?.('impact','heavy');
multi=Math.min(multi+1,5);
}
}
}

function addScore(pts){
const add=pts*multi;
score+=add;
document.getElementById('scoreVal').textContent=score.toLocaleString();
// Float text effect on canvas
ctx.save();
ctx.fillStyle='#ffd700';
ctx.font='bold 16px sans-serif';
ctx.textAlign='center';
ctx.fillText('+'+add,ball.x,ball.y-20);
ctx.restore();
}

function endGame(){
gameActive=false;
const isNew=score>best;
if(isNew){best=score;window.TG?.save?.('pinball_best',best);localStorage.setItem('pinball_best',best.toString())}
document.getElementById('bestVal').textContent=best.toLocaleString();
document.getElementById('mTitle').textContent=t('gameOver');
document.getElementById('mScore').textContent=score.toLocaleString();
document.getElementById('mSub').textContent='';
const bd=document.getElementById('mBest');
if(isNew&&score>0){bd.textContent=t('newBest');bd.style.display='block'}else{bd.style.display='none'}
document.getElementById('modalBg').style.display='flex';
window.TG?.haptic?.('notification','error');
}

function resetGame(){
score=0;balls=MAX_BALLS;multi=1;gameActive=true;launched=false;
ball={x:W*0.9,y:H*0.5,vx:0,vy:0,active:false};
bumpers.forEach(b=>b.hit=0);
document.getElementById('scoreVal').textContent='0';
document.getElementById('ballsDisplay').textContent='üî¥'.repeat(MAX_BALLS)+' '+MAX_BALLS+' '+t('balls');
best=window.TG?.load?.('pinball_best',0)||parseInt(localStorage.getItem('pinball_best')||'0');
document.getElementById('bestVal').textContent=best.toLocaleString();
}

// Controls
function flipperUpdate(){
leftFlip+=(leftDown?1:0-leftFlip)*0.3;
rightFlip+=(rightDown?1:0-rightFlip)*0.3;
}

document.getElementById('flipL').addEventListener('touchstart',e=>{e.preventDefault();leftDown=true},{passive:false});
document.getElementById('flipL').addEventListener('touchend',()=>leftDown=false);
document.getElementById('flipL').addEventListener('mousedown',()=>leftDown=true);
document.getElementById('flipL').addEventListener('mouseup',()=>leftDown=false);
document.getElementById('flipR').addEventListener('touchstart',e=>{e.preventDefault();rightDown=true},{passive:false});
document.getElementById('flipR').addEventListener('touchend',()=>rightDown=false);
document.getElementById('flipR').addEventListener('mousedown',()=>rightDown=true);
document.getElementById('flipR').addEventListener('mouseup',()=>rightDown=false);

// Keyboard
document.addEventListener('keydown',e=>{
if(e.key==='ArrowLeft'||e.key==='z')leftDown=true;
if(e.key==='ArrowRight'||e.key==='/')rightDown=true;
if(e.key===' ')launchBall();
});
document.addEventListener('keyup',e=>{
if(e.key==='ArrowLeft'||e.key==='z')leftDown=false;
if(e.key==='ArrowRight'||e.key==='/')rightDown=false;
});

document.getElementById('launchBtn').addEventListener('click',launchBall);

function launchBall(){
if(!gameActive||ball.active)return;
ball.active=true;launched=true;
ball.x=W*0.9;ball.y=H*0.7;
ball.vx=-(2+Math.random()*2);
ball.vy=-(8+Math.random()*3);
window.TG?.haptic?.('impact','heavy');
}

document.getElementById('mReplay').addEventListener('click',()=>{document.getElementById('modalBg').style.display='none';resetGame()});
document.getElementById('mShare').addEventListener('click',()=>{window.TG?.shareScore?.(score,'Pinball Arcade','pinball-arcade')});

function loop(){
if(gameActive){
physics();
flipperUpdate();
}
render();
requestAnimationFrame(loop);
}

resetGame();
loop();
})();
</script>
<script src="/games/cross-promo.js"></script>
</body>
</html>
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
<title>Nonogram üî≤</title>
<meta name="description" content="ÎÖ∏ÎÖ∏Í∑∏Îû® ÌçºÏ¶ê! Ïà´Ïûê Îã®ÏÑúÎ°ú Í∑∏Î¶ºÏùÑ ÏôÑÏÑ±ÌïòÏÑ∏Ïöî. ÌîºÌÅ¨Î°úÏä§ Ïä§ÌÉÄÏùº Î°úÏßÅ ÌçºÏ¶ê.">
<meta property="og:title" content="Nonogram üî≤ ‚Äî East Sea Games">
<meta property="og:description" content="Ïà´Ïûê Îã®ÏÑúÎ•º Î∂ÑÏÑùÌï¥ Ïà®Í≤®ÏßÑ Í∑∏Î¶ºÏùÑ Ï∞æÏïÑÎÇ¥ÏÑ∏Ïöî!">
<meta property="og:image" content="https://eastsea.monster/games/nonogram/og.png">
<meta property="og:url" content="https://eastsea.monster/games/nonogram/">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary_large_image">
<link rel="canonical" href="https://eastsea.monster/games/nonogram/">
<link rel="manifest" href="/games/manifest.json">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"VideoGame","name":"Nonogram",
"url":"https://eastsea.monster/games/nonogram/",
"description":"ÎÖ∏ÎÖ∏Í∑∏Îû® Î°úÏßÅ ÌçºÏ¶ê ‚Äî Ïà´Ïûê Îã®ÏÑúÎ°ú Í∑∏Î¶ºÏùÑ ÏôÑÏÑ±ÌïòÏÑ∏Ïöî",
"gamePlatform":["Web Browser","Mobile Browser"],"applicationCategory":"Game",
"genre":"Puzzle","operatingSystem":"Any","inLanguage":["ko","en","ja"],
"offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},
"author":{"@type":"Person","name":"Jay Lee","url":"https://eastsea.monster"}}
</script>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{width:100%;height:100%;overflow:hidden;font-family:'Segoe UI',system-ui,-apple-system,sans-serif;background:#1a1a2e;color:#e0e0e0;user-select:none}
body{display:flex;flex-direction:column;align-items:center;padding-top:var(--safe-top,0px);padding-bottom:var(--safe-bottom,0px)}
#app{width:100%;max-width:500px;height:100%;display:flex;flex-direction:column}
.header{display:flex;justify-content:space-between;align-items:center;padding:8px 14px;background:rgba(0,0,0,0.2)}
.header .title{font-size:16px;font-weight:700;color:#7c4dff}
.level-info{font-size:13px;color:#aaa}
.btn-sm{background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.2);color:#fff;padding:6px 10px;border-radius:8px;font-size:12px;cursor:pointer}
.btn-sm:active{transform:scale(0.95)}
.toolbar{display:flex;justify-content:center;gap:12px;padding:8px;background:rgba(0,0,0,0.15)}
.tool-btn{padding:8px 16px;border-radius:20px;border:2px solid transparent;font-size:14px;cursor:pointer;background:rgba(255,255,255,0.08);color:#fff;transition:all 0.2s;min-width:60px;text-align:center}
.tool-btn.active{border-color:#7c4dff;background:rgba(124,77,255,0.2);color:#7c4dff}
.game-wrap{flex:1;display:flex;align-items:center;justify-content:center;padding:12px;overflow:auto}
.puzzle-container{display:inline-grid;gap:0}
.clue-corner{background:transparent}
.col-clues{display:flex;flex-direction:column;align-items:center;justify-content:flex-end;padding:2px;gap:1px}
.row-clues{display:flex;align-items:center;justify-content:flex-end;padding:2px 4px;gap:3px}
.clue-num{font-size:11px;font-weight:700;color:#aaa;line-height:1.2}
.clue-num.done{color:#444}
.cell{border:1px solid rgba(255,255,255,0.08);background:rgba(255,255,255,0.03);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background 0.1s;position:relative}
.cell:hover{background:rgba(255,255,255,0.08)}
.cell.filled{background:#7c4dff;border-color:rgba(124,77,255,0.3)}
.cell.marked{background:rgba(255,255,255,0.03)}
.cell.marked::after{content:'‚úï';color:rgba(255,255,255,0.3);font-size:60%;font-weight:700}
.cell.error{background:#ff4444;animation:shake 0.3s}
.cell.border-right{border-right:2px solid rgba(255,255,255,0.15)}
.cell.border-bottom{border-bottom:2px solid rgba(255,255,255,0.15)}
.status-bar{display:flex;justify-content:space-between;padding:8px 14px;font-size:12px;color:#888}
.timer{font-variant-numeric:tabular-nums}
.modal-bg{position:fixed;inset:0;background:rgba(0,0,0,0.7);display:flex;align-items:center;justify-content:center;z-index:100;backdrop-filter:blur(6px)}
.modal{background:#16213e;border-radius:20px;padding:28px 24px;text-align:center;width:min(85vw,320px);border:1px solid rgba(255,255,255,0.1)}
.modal h2{font-size:24px;color:#7c4dff;margin-bottom:8px}
.modal .big{font-size:28px;margin:12px 0}
.modal .sub{font-size:14px;color:#aaa;margin-bottom:12px}
.btn{padding:14px 24px;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;min-height:48px;width:100%;margin-top:8px}
.btn-primary{background:#7c4dff;color:#fff}
.btn-secondary{background:rgba(255,255,255,0.1);color:#fff;border:1px solid rgba(255,255,255,0.15)}
@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-4px)}75%{transform:translateX(4px)}}
</style>
</head>
<body>
<div id="app">
<div class="header">
<div class="title">üî≤ Nonogram</div>
<span class="level-info" id="levelInfo">Level 1</span>
<button class="btn-sm" id="btnReset" data-i18n="reset">Reset</button>
</div>
<div class="toolbar">
<button class="tool-btn active" id="toolFill" data-tool="fill">‚úèÔ∏è <span data-i18n="fill">Fill</span></button>
<button class="tool-btn" id="toolMark" data-tool="mark">‚úï <span data-i18n="mark">Mark</span></button>
</div>
<div class="game-wrap"><div id="puzzleArea"></div></div>
<div class="status-bar">
<span id="errCount">‚ùå 0/3</span>
<span class="timer" id="timer">0:00</span>
<span id="progress">0%</span>
</div>
</div>
<div class="modal-bg" id="modalBg" style="display:none">
<div class="modal">
<h2 id="modalTitle"></h2>
<div class="big" id="modalEmoji"></div>
<div class="sub" id="modalSub"></div>
<button class="btn btn-primary" id="modalNext" data-i18n="next">Next Level</button>
<button class="btn btn-secondary" id="modalReplay" data-i18n="replay">Replay</button>
</div>
</div>
<script src="/games/tg-sdk-wrapper.js"></script>
<script>
(function(){
'use strict';
const I18N={
ko:{fill:'Ï±ÑÏö∞Í∏∞',mark:'ÌëúÏãú',reset:'Ï¥àÍ∏∞Ìôî',next:'Îã§Ïùå Î†àÎ≤®',replay:'Îã§Ïãú',complete:'ÏôÑÏÑ±!',failed:'Ïã§Ìå®',time:'ÏãúÍ∞Ñ',errors:'Ïò§Î•ò',level:'Î†àÎ≤®'},
en:{fill:'Fill',mark:'Mark',reset:'Reset',next:'Next Level',replay:'Replay',complete:'Complete!',failed:'Failed',time:'Time',errors:'Errors',level:'Level'},
ja:{fill:'Â°ó„Çã',mark:'„Éû„Éº„ÇØ',reset:'„É™„Çª„ÉÉ„Éà',next:'Ê¨°„ÅÆ„É¨„Éô„É´',replay:'„É™„Éó„É¨„Ç§',complete:'„ÇØ„É™„Ç¢ÔºÅ',failed:'Â§±Êïó',time:'ÊôÇÈñì',errors:'„Ç®„É©„Éº',level:'„É¨„Éô„É´'}
};
const ulang=(window.TG?.getLang?.()||navigator.language||'en').slice(0,2);
const lang=['ko','ja'].includes(ulang)?ulang:'en';
const t=k=>I18N[lang]?.[k]||I18N.en[k]||k;
document.querySelectorAll('[data-i18n]').forEach(el=>{const k=el.dataset.i18n;if(t(k))el.textContent=t(k)});

// Puzzle library ‚Äî pre-designed patterns
const PUZZLES=[
// 5x5 easy
{size:5,pattern:[
[1,0,1,0,1],
[0,1,1,1,0],
[1,1,1,1,1],
[0,1,1,1,0],
[1,0,1,0,1]],name:'Star'},
{size:5,pattern:[
[0,1,1,1,0],
[1,1,1,1,1],
[1,1,1,1,1],
[0,1,1,1,0],
[0,0,1,0,0]],name:'Heart'},
{size:5,pattern:[
[1,1,1,1,1],
[1,0,0,0,1],
[1,0,0,0,1],
[1,0,0,0,1],
[1,1,1,1,1]],name:'Frame'},
{size:5,pattern:[
[0,0,1,0,0],
[0,1,1,1,0],
[1,1,1,1,1],
[0,1,1,1,0],
[0,0,1,0,0]],name:'Diamond'},
// 7x7 medium
{size:7,pattern:[
[0,0,1,1,1,0,0],
[0,1,0,0,0,1,0],
[1,0,1,0,1,0,1],
[1,0,0,0,0,0,1],
[0,1,0,1,0,1,0],
[0,0,1,0,1,0,0],
[0,0,0,1,0,0,0]],name:'Cat'},
{size:7,pattern:[
[0,1,1,1,1,1,0],
[1,0,0,0,0,0,1],
[1,0,1,0,1,0,1],
[1,0,0,0,0,0,1],
[1,0,1,1,1,0,1],
[1,0,0,0,0,0,1],
[0,1,1,1,1,1,0]],name:'Face'},
{size:7,pattern:[
[0,0,0,1,0,0,0],
[0,0,1,1,1,0,0],
[0,1,1,1,1,1,0],
[1,1,1,1,1,1,1],
[0,0,0,1,0,0,0],
[0,0,0,1,0,0,0],
[0,0,0,1,0,0,0]],name:'Arrow'},
// 10x10 hard
{size:10,pattern:[
[0,0,1,1,1,1,1,1,0,0],
[0,1,1,0,0,0,0,1,1,0],
[1,1,0,0,0,0,0,0,1,1],
[1,0,0,1,0,0,1,0,0,1],
[1,0,0,0,0,0,0,0,0,1],
[1,0,0,1,0,0,1,0,0,1],
[1,0,0,0,1,1,0,0,0,1],
[1,1,0,0,0,0,0,0,1,1],
[0,1,1,0,0,0,0,1,1,0],
[0,0,1,1,1,1,1,1,0,0]],name:'Skull'},
{size:10,pattern:[
[0,0,0,0,1,1,0,0,0,0],
[0,0,0,1,1,1,1,0,0,0],
[0,0,1,1,1,1,1,1,0,0],
[0,1,1,1,1,1,1,1,1,0],
[1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1],
[0,1,0,1,1,1,1,0,1,0],
[0,0,0,0,1,1,0,0,0,0],
[0,0,0,1,0,0,1,0,0,0],
[0,0,1,0,0,0,0,1,0,0]],name:'Bell'},
{size:10,pattern:[
[1,1,1,1,1,1,1,1,1,1],
[1,0,0,0,1,1,0,0,0,1],
[1,0,1,0,0,0,0,1,0,1],
[1,0,0,0,0,0,0,0,0,1],
[1,1,0,0,1,1,0,0,1,1],
[1,1,0,0,1,1,0,0,1,1],
[1,0,0,0,0,0,0,0,0,1],
[1,0,1,0,0,0,0,1,0,1],
[1,0,0,0,1,1,0,0,0,1],
[1,1,1,1,1,1,1,1,1,1]],name:'Castle'}
];

let currentLevel=0,grid=[],errors=0,maxErrors=3,timerInterval=null,seconds=0,currentTool='fill',solved=false;

function getClues(line){
const clues=[];let count=0;
for(const v of line){
if(v)count++;
else if(count){clues.push(count);count=0}
}
if(count)clues.push(count);
return clues.length?clues:[0];
}

function startLevel(lvl){
currentLevel=lvl;
const puzzle=PUZZLES[lvl%PUZZLES.length];
const size=puzzle.size;
grid=Array.from({length:size},()=>Array(size).fill(0));
errors=0;solved=false;seconds=0;
clearInterval(timerInterval);
timerInterval=setInterval(()=>{if(!solved){seconds++;document.getElementById('timer').textContent=formatTime(seconds)}},1000);
document.getElementById('levelInfo').textContent=`${t('level')} ${lvl+1} ‚Äî ${puzzle.name}`;
document.getElementById('errCount').textContent=`‚ùå ${errors}/${maxErrors}`;
document.getElementById('progress').textContent='0%';
document.getElementById('timer').textContent='0:00';
renderPuzzle(puzzle);
}

function renderPuzzle(puzzle){
const size=puzzle.size;
const area=document.getElementById('puzzleArea');
area.innerHTML='';
const rowClues=puzzle.pattern.map(r=>getClues(r));
const colClues=[];
for(let c=0;c<size;c++){
const col=puzzle.pattern.map(r=>r[c]);
colClues.push(getClues(col));
}
const maxRowClue=Math.max(...rowClues.map(r=>r.length));
const maxColClue=Math.max(...colClues.map(c=>c.length));
const cellSize=Math.min(Math.floor((Math.min(window.innerWidth,500)-40-maxRowClue*20)/(size)),36);
const container=document.createElement('div');
container.className='puzzle-container';
container.style.gridTemplateColumns=`${maxRowClue*18}px repeat(${size},${cellSize}px)`;
container.style.gridTemplateRows=`${maxColClue*16}px repeat(${size},${cellSize}px)`;
// Corner
const corner=document.createElement('div');
corner.className='clue-corner';
container.appendChild(corner);
// Column clues
for(let c=0;c<size;c++){
const div=document.createElement('div');
div.className='col-clues';
div.id='cc'+c;
colClues[c].forEach(n=>{
const s=document.createElement('span');
s.className='clue-num';
s.textContent=n;
div.appendChild(s);
});
container.appendChild(div);
}
// Rows
for(let r=0;r<size;r++){
const rd=document.createElement('div');
rd.className='row-clues';
rd.id='rc'+r;
rowClues[r].forEach(n=>{
const s=document.createElement('span');
s.className='clue-num';
s.textContent=n;
rd.appendChild(s);
});
container.appendChild(rd);
for(let c=0;c<size;c++){
const cell=document.createElement('div');
cell.className='cell';
if((c+1)%5===0&&c<size-1)cell.classList.add('border-right');
if((r+1)%5===0&&r<size-1)cell.classList.add('border-bottom');
cell.style.width=cellSize+'px';
cell.style.height=cellSize+'px';
cell.dataset.r=r;
cell.dataset.c=c;
cell.addEventListener('click',()=>onCellClick(r,c,puzzle));
cell.addEventListener('contextmenu',(e)=>{e.preventDefault();currentTool=currentTool==='fill'?'mark':'fill';updateToolbar();onCellClick(r,c,puzzle)});
container.appendChild(cell);
}
}
area.appendChild(container);
}

function onCellClick(r,c,puzzle){
if(solved||errors>=maxErrors)return;
const cells=document.querySelectorAll('.cell');
const size=puzzle.size;
const idx=r*size+c;
const cell=cells[idx];
if(!cell)return;
if(currentTool==='fill'){
if(grid[r][c]===1)return;
if(puzzle.pattern[r][c]===1){
grid[r][c]=1;
cell.classList.add('filled');
cell.classList.remove('marked');
window.TG?.haptic?.('impact','light');
}else{
errors++;
document.getElementById('errCount').textContent=`‚ùå ${errors}/${maxErrors}`;
cell.classList.add('error');
setTimeout(()=>cell.classList.remove('error'),300);
grid[r][c]=-1;
cell.classList.add('marked');
window.TG?.haptic?.('notification','error');
if(errors>=maxErrors){gameOver();return}
}
}else{
if(grid[r][c]===1)return;
if(grid[r][c]===-1||grid[r][c]===2){grid[r][c]=0;cell.classList.remove('marked')}
else{grid[r][c]=2;cell.classList.add('marked')}
window.TG?.haptic?.('selection');
}
updateProgress(puzzle);
updateClueHighlights(puzzle);
checkWin(puzzle);
}

function updateProgress(puzzle){
const total=puzzle.pattern.flat().filter(v=>v===1).length;
const filled=grid.flat().filter(v=>v===1).length;
document.getElementById('progress').textContent=Math.round(filled/total*100)+'%';
}

function updateClueHighlights(puzzle){
const size=puzzle.size;
for(let r=0;r<size;r++){
const actual=getClues(grid[r].map(v=>v===1?1:0));
const expected=getClues(puzzle.pattern[r]);
const done=JSON.stringify(actual)===JSON.stringify(expected);
const el=document.getElementById('rc'+r);
if(el)el.querySelectorAll('.clue-num').forEach(s=>s.classList.toggle('done',done));
}
for(let c=0;c<size;c++){
const col=grid.map(row=>row[c]===1?1:0);
const expected=puzzle.pattern.map(row=>row[c]);
const done=JSON.stringify(getClues(col))===JSON.stringify(getClues(expected));
const el=document.getElementById('cc'+c);
if(el)el.querySelectorAll('.clue-num').forEach(s=>s.classList.toggle('done',done));
}
}

function checkWin(puzzle){
const size=puzzle.size;
for(let r=0;r<size;r++)for(let c=0;c<size;c++){
if(puzzle.pattern[r][c]===1&&grid[r][c]!==1)return;
}
solved=true;
clearInterval(timerInterval);
const score=(currentLevel+1)*1000-errors*200-seconds*2;
setTimeout(()=>{
document.getElementById('modalTitle').textContent=t('complete');
document.getElementById('modalEmoji').textContent='üé®';
document.getElementById('modalSub').textContent=`${t('time')}: ${formatTime(seconds)} | ${t('errors')}: ${errors}`;
document.getElementById('modalBg').style.display='flex';
window.TG?.haptic?.('notification','success');
if(window.GameScore)GameScore.save('nonogram',Math.max(0,score));
},500);
}

function gameOver(){
solved=true;
clearInterval(timerInterval);
document.getElementById('modalTitle').textContent=t('failed');
document.getElementById('modalEmoji').textContent='üò¢';
document.getElementById('modalSub').textContent=`${t('errors')}: ${errors}/${maxErrors}`;
document.getElementById('modalBg').style.display='flex';
document.getElementById('modalNext').style.display='none';
}

function formatTime(s){return Math.floor(s/60)+':'+String(s%60).padStart(2,'0')}

function updateToolbar(){
document.querySelectorAll('.tool-btn').forEach(b=>b.classList.remove('active'));
document.querySelector(`[data-tool="${currentTool}"]`).classList.add('active');
}

document.querySelectorAll('.tool-btn').forEach(b=>{
b.addEventListener('click',()=>{currentTool=b.dataset.tool;updateToolbar();window.TG?.haptic?.('selection')});
});

document.getElementById('btnReset').addEventListener('click',()=>startLevel(currentLevel));
document.getElementById('modalNext').addEventListener('click',()=>{
document.getElementById('modalBg').style.display='none';
document.getElementById('modalNext').style.display='';
startLevel(currentLevel+1);
});
document.getElementById('modalReplay').addEventListener('click',()=>{
document.getElementById('modalBg').style.display='none';
document.getElementById('modalNext').style.display='';
startLevel(currentLevel);
});

startLevel(0);
})();
</script>
<script src="/games/cross-promo.js"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
<title>Catch Basket ğŸ§º</title>
<meta property="og:title" content="Catch Basket - Fruit Catching Game">
<meta property="og:type" content="website">
<meta property="og:url" content="https://eastsea.monster/games/catch-basket/">
<meta property="og:description" content="Catch falling fruits with your basket! Avoid bombs, collect power-ups. Free HTML5 arcade game.">
<meta property="og:image" content="https://eastsea.monster/games/icons/catch-basket.png">
<meta property="og:site_name" content="East Sea Games">
<meta name="description" content="Catch Basket - Catch falling fruits, avoid bombs, collect power-ups! Free browser arcade game.">
<meta name="theme-color" content="#87CEEB">
<link rel="manifest" href="/games/manifest.json">
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ§º</text></svg>">
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<!-- TG SDK Wrapper (inline) -->
<script>
(function(){'use strict';const TG={app:window.Telegram?.WebApp,user:null,isReady:false,_backHandlers:[],init(){if(!this.app){console.log('[TG] Standalone mode');this.isReady=true;this._injectStandaloneCSS();return false}this.app.ready();this.app.expand();this.user=this.app.initDataUnsafe?.user||null;this._applyTheme();this._setupSafeArea();this._setupBackButton();this.app.onEvent('viewportChanged',({isStateStable})=>{if(isStateStable)this._updateViewport()});this.app.onEvent('themeChanged',()=>this._applyTheme());this.isReady=true;return true},_applyTheme(){const tp=this.app?.themeParams;if(!tp)return;const r=document.documentElement.style;const m={'--tg-bg':tp.bg_color,'--tg-text':tp.text_color,'--tg-hint':tp.hint_color,'--tg-link':tp.link_color,'--tg-button':tp.button_color,'--tg-button-text':tp.button_text_color,'--tg-secondary-bg':tp.secondary_bg_color,'--tg-header-bg':tp.header_bg_color,'--tg-section-bg':tp.section_bg_color,'--tg-accent-text':tp.accent_text_color};for(const[p,v]of Object.entries(m)){if(v)r.setProperty(p,v)}},_setupSafeArea(){this._applySafeAreaValues();if(this.app?.onEvent){this.app.onEvent('safeAreaChanged',()=>this._applySafeAreaValues());this.app.onEvent('contentSafeAreaChanged',()=>this._applySafeAreaValues())}this._updateViewport()},_applySafeAreaValues(){const r=document.documentElement.style;const sa=this.app?.safeAreaInset||{top:0,bottom:0,left:0,right:0};const csa=this.app?.contentSafeAreaInset||{top:0,bottom:0,left:0,right:0};const tt=sa.top+csa.top,tb=sa.bottom+csa.bottom;r.setProperty('--safe-top',tt+'px');r.setProperty('--safe-bottom',tb+'px');r.setProperty('--safe-left',sa.left+'px');r.setProperty('--safe-right',sa.right+'px');document.body.style.paddingTop=tt+'px';document.body.style.paddingBottom=tb+'px';document.body.style.boxSizing='border-box'},_updateViewport(){const vh=this.app?.viewportStableHeight||window.innerHeight;document.documentElement.style.setProperty('--tg-viewport-height',vh+'px')},_setupBackButton(){if(!this.app?.BackButton)return;this.app.BackButton.show();this.app.BackButton.onClick(()=>{for(let i=this._backHandlers.length-1;i>=0;i--){if(this._backHandlers[i]())return}this.app.close()})},_injectStandaloneCSS(){const r=document.documentElement.style;r.setProperty('--tg-bg','#87CEEB');r.setProperty('--tg-text','#333');r.setProperty('--tg-hint','#666');r.setProperty('--tg-link','#e94560');r.setProperty('--tg-button','#ff6b35');r.setProperty('--tg-button-text','#fff');r.setProperty('--tg-secondary-bg','#f0f8ff');r.setProperty('--tg-viewport-height',window.innerHeight+'px');r.setProperty('--safe-top','0px');r.setProperty('--safe-bottom','0px')},getUserId(){return this.user?.id||'anonymous'},getUserName(){return this.user?.first_name||'Player'},getLang(){return this.user?.language_code||'en'},isTelegram(){return!!this.app},save(k,v){try{localStorage.setItem('tg_'+this.getUserId()+'_'+k,JSON.stringify(v))}catch(e){}},load(k,fb=null){try{const r=localStorage.getItem('tg_'+this.getUserId()+'_'+k);return r?JSON.parse(r):fb}catch{return fb}},onBack(h){this._backHandlers.push(h)},haptic(type='impact',style='medium'){if(!this.app?.HapticFeedback)return;try{switch(type){case'impact':this.app.HapticFeedback.impactOccurred(style);break;case'notification':this.app.HapticFeedback.notificationOccurred(style);break;case'selection':this.app.HapticFeedback.selectionChanged();break}}catch{}},shareScore(score,name,id){const text=`ğŸ§º ${name}: ${score.toLocaleString()}ì !\në„ì „í•´ë³´ì„¸ìš”! ğŸ‘‡`;const url=`https://t.me/eastsea_games_bot?startapp=game_${id}`;if(this.app)this.app.openTelegramLink(`https://t.me/share/url?url=${encodeURIComponent(url)}&text=${encodeURIComponent(text)}`)},shareInvite(){const text='ğŸ® East Sea Games â€” ë¬´ë£Œ ê²Œì„!\nì§€ê¸ˆ ë°”ë¡œ í”Œë ˆì´ ğŸ‘‡';const url='https://t.me/eastsea_games_bot';if(this.app)this.app.openTelegramLink(`https://t.me/share/url?url=${encodeURIComponent(url)}&text=${encodeURIComponent(text)}`)}};const GameScore={save(gid,score){const k='score_'+gid;const best=this.getBest(gid);const isNew=score>best;if(isNew)TG.save(k+'_best',score);const h=TG.load(k+'_history',[]);h.unshift({score,date:Date.now()});if(h.length>20)h.pop();TG.save(k+'_history',h);const p=TG.load(k+'_plays',0);TG.save(k+'_plays',p+1);return{isNewBest:isNew,bestScore:isNew?score:best}},getBest(gid){return TG.load('score_'+gid+'_best',0)},getPlays(gid){return TG.load('score_'+gid+'_plays',0)}};window.TG=TG;window.GameScore=GameScore;function ai(){TG.init()}document.readyState==='loading'?document.addEventListener('DOMContentLoaded',ai):ai()})();
</script>
<!-- i18n (inline) -->
<script>
(function(){'use strict';function dl(){try{var t=window.Telegram&&window.Telegram.WebApp&&window.Telegram.WebApp.initDataUnsafe&&window.Telegram.WebApp.initDataUnsafe.user&&window.Telegram.WebApp.initDataUnsafe.user.language_code;if(t&&t.startsWith('ko'))return'ko';if(t)return'en'}catch(e){}var n=(navigator.language||'en').toLowerCase();return n.startsWith('ko')?'ko':'en'}var _l=dl();if(document.documentElement)document.documentElement.lang=_l;function GameI18n(tr){return function(k,fb){var e=tr[k];if(!e)return fb||k;return e[_l]||e['en']||fb||k}}window.detectLanguage=dl;window.GameI18n=GameI18n;window._i18nLang=_l})();
</script>
<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{font-family:-apple-system,'Segoe UI',Roboto,sans-serif;background:#87CEEB;overflow:hidden;touch-action:none;user-select:none;-webkit-user-select:none}
#app{width:100vw;height:calc(var(--tg-viewport-height,100vh));position:relative;display:flex;flex-direction:column}
canvas{display:block;width:100%;height:100%}

/* Screens */
.screen{display:none;position:absolute;inset:0;flex-direction:column;align-items:center;justify-content:center;z-index:10}
.screen.active{display:flex}

/* Menu */
#menu{background:linear-gradient(180deg,#87CEEB 0%,#98FB98 100%);gap:14px;text-align:center;padding:20px}
.menu-emoji{font-size:80px;filter:drop-shadow(0 6px 20px rgba(0,0,0,0.15));animation:bounce 2s ease-in-out infinite}
@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-12px)}}
.menu-title{font-size:2.2rem;font-weight:900;color:#4a3728;text-shadow:2px 2px 0 rgba(255,255,255,0.5);letter-spacing:-1px}
.menu-sub{color:#5a4a3a;font-size:0.95rem;max-width:280px;line-height:1.4}
.menu-stats{display:flex;gap:24px;color:#6a5a4a;font-size:0.9rem}
.menu-stats span{display:flex;flex-direction:column;align-items:center;gap:2px}
.menu-stats .val{font-weight:800;font-size:1.3rem;color:#e94560}
.btn{padding:16px 40px;border:none;border-radius:50px;font-size:1.1rem;font-weight:700;cursor:pointer;transition:transform 0.15s,box-shadow 0.15s;min-width:200px;min-height:52px;letter-spacing:0.5px}
.btn:active{transform:scale(0.95)}
.btn-play{background:linear-gradient(135deg,#ff6b35,#f7931e);color:#fff;box-shadow:0 6px 24px rgba(255,107,53,0.4)}
.btn-play:active{box-shadow:0 2px 8px rgba(255,107,53,0.3)}
.btn-how{background:rgba(255,255,255,0.6);color:#4a3728;backdrop-filter:blur(10px)}

/* HUD */
#hud{position:absolute;top:0;left:0;right:0;z-index:5;padding:8px 16px;padding-top:calc(var(--safe-top,0px) + 8px);display:none;pointer-events:none}
#hud.active{display:flex}
#hud{justify-content:space-between;align-items:flex-start;gap:8px}
.hud-left,.hud-right{display:flex;flex-direction:column;gap:4px}
.hud-left{align-items:flex-start}
.hud-right{align-items:flex-end}
.hud-item{background:rgba(255,255,255,0.85);backdrop-filter:blur(8px);border-radius:12px;padding:4px 10px;font-size:0.8rem;font-weight:700;color:#4a3728;box-shadow:0 2px 8px rgba(0,0,0,0.1);white-space:nowrap}
.hud-item.score{font-size:1rem;background:linear-gradient(135deg,#ff6b35,#f7931e);color:#fff;padding:6px 14px}
.hud-item.combo{background:linear-gradient(135deg,#e94560,#ff6b9d);color:#fff;animation:pulse 0.5s}
.hud-item.power{background:linear-gradient(135deg,#7c3aed,#a855f7);color:#fff;animation:glow 1s infinite}
@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.15)}100%{transform:scale(1)}}
@keyframes glow{0%,100%{box-shadow:0 0 8px rgba(124,58,237,0.5)}50%{box-shadow:0 0 16px rgba(124,58,237,0.8)}}

/* How to play overlay */
#howto{background:rgba(0,0,0,0.6);backdrop-filter:blur(8px);padding:20px;z-index:20}
.howto-card{background:#fff;border-radius:20px;padding:24px;max-width:340px;width:90%;color:#333;max-height:80vh;overflow-y:auto}
.howto-card h2{text-align:center;margin-bottom:12px;font-size:1.3rem}
.howto-row{display:flex;align-items:center;gap:10px;padding:8px 0;border-bottom:1px solid #eee;font-size:0.9rem}
.howto-row:last-child{border-bottom:none}
.howto-icon{font-size:1.5rem;min-width:36px;text-align:center}
.howto-card .btn{margin-top:16px;width:100%;min-width:unset;background:#ff6b35;color:#fff}

/* Game Over overlay (from tg-sdk-wrapper pattern) */
#gameover{background:rgba(0,0,0,0.7);backdrop-filter:blur(8px);z-index:20;gap:0;opacity:0;transition:opacity 0.3s}
#gameover.active{opacity:1}
.go-card{background:linear-gradient(180deg,#fff9f0,#fff);border-radius:24px;padding:28px;text-align:center;width:88%;max-width:340px;box-shadow:0 20px 60px rgba(0,0,0,0.3);transform:scale(0.9) translateY(20px);transition:transform 0.35s cubic-bezier(0.34,1.56,0.64,1)}
#gameover.active .go-card{transform:scale(1) translateY(0)}
.go-card h2{font-size:1.6rem;color:#4a3728;margin-bottom:4px}
.go-newbest{color:#e94560;font-weight:700;font-size:0.9rem;animation:pulse 1s infinite}
.go-score{font-size:3.2rem;font-weight:900;color:#ff6b35;line-height:1.1;margin:8px 0 4px}
.go-label{color:#999;font-size:0.75rem;text-transform:uppercase;letter-spacing:2px}
.go-best{color:#888;font-size:0.95rem;margin:8px 0}
.go-extra{color:#aaa;font-size:0.8rem;margin-bottom:8px}
.go-btns{display:flex;gap:10px;margin-top:16px}
.go-btn{flex:1;padding:14px;border:none;border-radius:14px;font-size:0.95rem;font-weight:700;cursor:pointer;transition:transform 0.15s;min-height:48px}
.go-btn:active{transform:scale(0.95)}
.go-btn.replay{background:linear-gradient(135deg,#ff6b35,#f7931e);color:#fff}
.go-btn.share{background:linear-gradient(135deg,#27ae60,#2ecc71);color:#fff}
.go-btns.sec{margin-top:8px}
.go-btn.invite{background:#f0f0f0;color:#555}
</style>
</head>
<body>
<div id="app">
  <canvas id="gc"></canvas>

  <!-- HUD -->
  <div id="hud">
    <div class="hud-left">
      <div class="hud-item score" id="hud-score">ğŸ§º 0</div>
      <div class="hud-item" id="hud-level">Lv.1</div>
      <div class="hud-item combo" id="hud-combo" style="display:none">ğŸ”¥ x2</div>
    </div>
    <div class="hud-right">
      <div class="hud-item" id="hud-lives">â¤ï¸â¤ï¸â¤ï¸</div>
      <div class="hud-item power" id="hud-power" style="display:none">âš¡</div>
    </div>
  </div>

  <!-- Menu -->
  <div id="menu" class="screen active">
    <div class="menu-emoji">ğŸ§º</div>
    <div class="menu-title" data-t="title">Catch Basket</div>
    <div class="menu-sub" data-t="subtitle">Catch falling fruits, avoid bombs!</div>
    <div class="menu-stats">
      <span><span class="val" id="stat-best">0</span><span data-t="best">Best</span></span>
      <span><span class="val" id="stat-plays">0</span><span data-t="plays">Plays</span></span>
    </div>
    <button class="btn btn-play" onclick="startGame()" data-t="play">â–¶ Play</button>
    <button class="btn btn-how" onclick="showHow()" data-t="howBtn">â“ How to Play</button>
  </div>

  <!-- How to Play -->
  <div id="howto" class="screen">
    <div class="howto-card">
      <h2 data-t="howTitle">How to Play</h2>
      <div class="howto-row"><span class="howto-icon">ğŸ‘†</span><span data-t="how1">Drag or touch to move the basket</span></div>
      <div class="howto-row"><span class="howto-icon">ğŸ</span><span data-t="how2">Catch fruits to score points</span></div>
      <div class="howto-row"><span class="howto-icon">ğŸ’£</span><span data-t="how3">Avoid bombs! (-1 life)</span></div>
      <div class="howto-row"><span class="howto-icon">ğŸ§²</span><span data-t="how4">Magnet: attract nearby items</span></div>
      <div class="howto-row"><span class="howto-icon">â°</span><span data-t="how5">Time Freeze: slow all items</span></div>
      <div class="howto-row"><span class="howto-icon">âœ¨</span><span data-t="how6">2x Score: double points!</span></div>
      <div class="howto-row"><span class="howto-icon">âš¡</span><span data-t="how7">Level up every 200 pts for faster drops</span></div>
      <button class="btn" onclick="hideHow()" data-t="gotIt">Got it!</button>
    </div>
  </div>

  <!-- Game Over -->
  <div id="gameover" class="screen">
    <div class="go-card">
      <h2 data-t="gameOver">Game Over</h2>
      <div class="go-newbest" id="go-newbest" style="display:none" data-t="newBest">ğŸ† New Best!</div>
      <div class="go-score" id="go-score">0</div>
      <div class="go-label" data-t="scoreLabel">SCORE</div>
      <div class="go-best" id="go-best">ğŸ… Best: 0</div>
      <div class="go-extra" id="go-extra"></div>
      <div class="go-btns">
        <button class="go-btn replay" onclick="startGame()" data-t="replay">ğŸ”„ Replay</button>
        <button class="go-btn share" onclick="shareResult()" data-t="share">ğŸ“¢ Share</button>
      </div>
      <div class="go-btns sec">
        <button class="go-btn invite" onclick="TG.shareInvite()" data-t="invite">ğŸ‘¥ Invite</button>
        <button class="go-btn invite" onclick="goHome()" data-t="home">ğŸ  Home</button>
      </div>
    </div>
  </div>
</div>

<!-- Cross Promo (inline) -->
<script>
(function(){var G=[{slug:'ball-sort',name:'Ball Sort',icon:'ğŸ§ª',cat:'puzzle'},{slug:'block-bounce',name:'Block Bounce',icon:'ğŸŸ¦',cat:'arcade'},{slug:'brick-breaker',name:'Brick Breaker',icon:'ğŸ§±',cat:'arcade'},{slug:'chain-pop',name:'Chain Pop',icon:'ğŸ’¥',cat:'puzzle'},{slug:'crystal-match',name:'Crystal Match',icon:'ğŸ’',cat:'puzzle'},{slug:'fruit-merge-drop',name:'Fruit Merge',icon:'ğŸ‰',cat:'puzzle'},{slug:'gravity-orbit',name:'Gravity Orbit',icon:'ğŸª',cat:'arcade'},{slug:'neon-snake',name:'Neon Snake',icon:'ğŸ',cat:'arcade'},{slug:'number-drop',name:'Number Drop',icon:'ğŸ”¢',cat:'puzzle'},{slug:'sushi-sprint',name:'Sushi Sprint',icon:'ğŸ£',cat:'casual'},{slug:'whack-a-mole',name:'Whack a Mole',icon:'ğŸ”¨',cat:'arcade'},{slug:'zombie-survivor',name:'Zombie Survivor',icon:'ğŸ§Ÿ',cat:'arcade'},{slug:'jump-physics',name:'Jump Physics',icon:'ğŸ¦˜',cat:'arcade'},{slug:'fishing-tycoon',name:'Fishing Tycoon',icon:'ğŸ£',cat:'idle'}];var cs='catch-basket';var ot=G.filter(function(g){return g.slug!==cs});for(var i=ot.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1));var t=ot[i];ot[i]=ot[j];ot[j]=t}var p=ot.slice(0,3);if(!p.length)return;var s=document.createElement('style');s.textContent='#esp-promo{position:fixed;bottom:0;left:0;right:0;z-index:99999;background:linear-gradient(135deg,#4a3728,#6b4c3a);border-top:2px solid #ff6b35;padding:8px 12px;font-family:inherit;display:flex;align-items:center;gap:8px;transform:translateY(100%);transition:transform .4s ease;box-shadow:0 -4px 20px rgba(0,0,0,.3)}#esp-promo.show{transform:translateY(0)}#esp-promo .el{color:#ff6b35;font-size:11px;font-weight:700;white-space:nowrap}#esp-promo .eg{display:flex;gap:6px;flex:1;overflow-x:auto}#esp-promo .ec{display:flex;align-items:center;gap:5px;background:rgba(255,255,255,.1);border-radius:8px;padding:6px 10px;text-decoration:none;color:#fff;font-size:12px;white-space:nowrap;transition:all .2s;flex-shrink:0}#esp-promo .ec:hover{background:rgba(255,107,53,.3)}#esp-promo .ei{font-size:18px}#esp-promo .en{font-weight:500}#esp-promo .ex{color:rgba(255,255,255,.4);font-size:18px;cursor:pointer;padding:4px 6px;border:none;background:none}#esp-promo .ea{color:#ff6b35;font-size:11px;text-decoration:none;padding:4px 8px;border:1px solid rgba(255,107,53,.4);border-radius:12px}';document.head.appendChild(s);var b=document.createElement('div');b.id='esp-promo';b.innerHTML='<span class="el">ğŸ® TRY</span><div class="eg">'+p.map(function(g){return'<a class="ec" href="/games/'+g.slug+'/"><span class="ei">'+g.icon+'</span><span class="en">'+g.name+'</span></a>'}).join('')+'</div><a class="ea" href="/games/">ALL</a><button class="ex" onclick="this.parentElement.classList.remove(\'show\')">&times;</button>';document.body.appendChild(b);setTimeout(function(){b.classList.add('show')},5000)})();
</script>

<script>
'use strict';

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// i18n
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const T = GameI18n({
  title:     { en: 'Catch Basket', ko: 'ë°”êµ¬ë‹ˆ ë°›ê¸°' },
  subtitle:  { en: 'Catch falling fruits, avoid bombs!', ko: 'ë–¨ì–´ì§€ëŠ” ê³¼ì¼ì„ ë°›ê³  í­íƒ„ì„ í”¼í•˜ì„¸ìš”!' },
  best:      { en: 'Best', ko: 'ìµœê³ ' },
  plays:     { en: 'Plays', ko: 'í”Œë ˆì´' },
  play:      { en: 'â–¶ Play', ko: 'â–¶ ì‹œì‘' },
  howBtn:    { en: 'â“ How to Play', ko: 'â“ ê²Œì„ ë°©ë²•' },
  howTitle:  { en: 'How to Play', ko: 'ê²Œì„ ë°©ë²•' },
  how1:      { en: 'Drag or touch to move the basket', ko: 'ë“œë˜ê·¸ ë˜ëŠ” í„°ì¹˜ë¡œ ë°”êµ¬ë‹ˆ ì´ë™' },
  how2:      { en: 'Catch fruits to score points', ko: 'ê³¼ì¼ì„ ë°›ì•„ ì ìˆ˜ë¥¼ ì–»ìœ¼ì„¸ìš”' },
  how3:      { en: 'Avoid bombs! (-1 life)', ko: 'í­íƒ„ ì£¼ì˜! (ëª©ìˆ¨ -1)' },
  how4:      { en: 'Magnet: attract nearby items', ko: 'ìì„: ì£¼ë³€ ì•„ì´í…œ ëŒì–´ë‹¹ê¸°ê¸°' },
  how5:      { en: 'Time Freeze: slow all items', ko: 'ì‹œê°„ì •ì§€: ëª¨ë“  ì•„ì´í…œ ëŠë ¤ì§' },
  how6:      { en: '2x Score: double points!', ko: '2x ì ìˆ˜: ë‘ ë°° ì ìˆ˜!' },
  how7:      { en: 'Level up every 200 pts for faster drops', ko: '200ì ë§ˆë‹¤ ë ˆë²¨ì—…, ì†ë„ ì¦ê°€' },
  gotIt:     { en: 'Got it!', ko: 'ì•Œê² ì–´ìš”!' },
  gameOver:  { en: 'Game Over', ko: 'ê²Œì„ ì˜¤ë²„' },
  newBest:   { en: 'ğŸ† New Best!', ko: 'ğŸ† ìƒˆ ê¸°ë¡!' },
  scoreLabel:{ en: 'SCORE', ko: 'ì ìˆ˜' },
  replay:    { en: 'ğŸ”„ Replay', ko: 'ğŸ”„ ë‹¤ì‹œí•˜ê¸°' },
  share:     { en: 'ğŸ“¢ Share', ko: 'ğŸ“¢ ê³µìœ ' },
  invite:    { en: 'ğŸ‘¥ Invite', ko: 'ğŸ‘¥ ì´ˆëŒ€' },
  home:      { en: 'ğŸ  Home', ko: 'ğŸ  í™ˆ' },
  lvl:       { en: 'Level', ko: 'ë ˆë²¨' },
  caught:    { en: 'Caught', ko: 'ë°›ì€ ê³¼ì¼' }
});

// Apply i18n to DOM
document.querySelectorAll('[data-t]').forEach(el => {
  const k = el.getAttribute('data-t');
  const v = T(k);
  if (v !== k) {
    if (el.tagName === 'BUTTON' || el.tagName === 'INPUT') el.textContent = v;
    else el.textContent = v;
  }
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Game Constants
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const GAME_ID = 'catch-basket';
const canvas = document.getElementById('gc');
const ctx = canvas.getContext('2d');

// Item types
const ITEMS = [
  { emoji: 'ğŸ', name: 'apple',     pts: 10, weight: 30, type: 'fruit' },
  { emoji: 'ğŸŠ', name: 'orange',    pts: 15, weight: 25, type: 'fruit' },
  { emoji: 'ğŸ‡', name: 'grape',     pts: 20, weight: 20, type: 'fruit' },
  { emoji: 'ğŸ“', name: 'strawberry',pts: 25, weight: 15, type: 'fruit' },
  { emoji: 'ğŸ‘', name: 'peach',     pts: 30, weight: 10, type: 'fruit' },
  { emoji: 'ğŸŒŸ', name: 'star',      pts: 50, weight: 5,  type: 'fruit' },
  { emoji: 'ğŸ’£', name: 'bomb',      pts: 0,  weight: 12, type: 'bomb'  },
  { emoji: 'ğŸ§²', name: 'magnet',    pts: 0,  weight: 3,  type: 'power', power: 'magnet' },
  { emoji: 'â°', name: 'freeze',    pts: 0,  weight: 3,  type: 'power', power: 'freeze' },
  { emoji: 'âœ¨', name: 'double',    pts: 0,  weight: 3,  type: 'power', power: 'double' },
];

const totalWeight = ITEMS.reduce((s, i) => s + i.weight, 0);

function pickItem() {
  let r = Math.random() * totalWeight;
  for (const item of ITEMS) {
    r -= item.weight;
    if (r <= 0) return item;
  }
  return ITEMS[0];
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Game State
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let W, H, dpr;
let state = 'menu'; // menu | playing | over
let score = 0, level = 1, lives = 3, combo = 0, caught = 0;
let basket = { x: 0, y: 0, w: 0, h: 0, targetX: 0 };
let items = [];
let particles = [];
let floatTexts = [];
let shakeTimer = 0, shakeX = 0, shakeY = 0;
let lastSpawn = 0, spawnInterval = 1200;
let animFrame = 0;

// Power-ups
let powers = { magnet: 0, freeze: 0, double: 0 };

// Background elements
let clouds = [];
let grassY = 0;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Resize
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function resize() {
  dpr = Math.min(window.devicePixelRatio || 1, 2);
  W = window.innerWidth;
  H = window.innerHeight;
  canvas.width = W * dpr;
  canvas.height = H * dpr;
  canvas.style.width = W + 'px';
  canvas.style.height = H + 'px';
  ctx.setTransform(dpr, 0, 0, dpr, 0, 0);

  // Basket size
  basket.w = Math.min(W * 0.2, 90);
  basket.h = basket.w * 0.65;
  basket.y = H - basket.h - 30;
  if (!basket.x) basket.x = W / 2;
  basket.targetX = basket.x;

  grassY = H - 20;

  // Init clouds
  if (clouds.length === 0) {
    for (let i = 0; i < 5; i++) {
      clouds.push({
        x: Math.random() * W,
        y: 30 + Math.random() * (H * 0.25),
        w: 60 + Math.random() * 80,
        speed: 0.2 + Math.random() * 0.3,
        opacity: 0.3 + Math.random() * 0.3
      });
    }
  }
}
window.addEventListener('resize', resize);
resize();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Input
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let touching = false;

function getX(e) {
  if (e.touches) return e.touches[0].clientX;
  return e.clientX;
}

canvas.addEventListener('touchstart', e => {
  e.preventDefault();
  if (state !== 'playing') return;
  touching = true;
  basket.targetX = getX(e);
}, { passive: false });

canvas.addEventListener('touchmove', e => {
  e.preventDefault();
  if (state !== 'playing' || !touching) return;
  basket.targetX = getX(e);
}, { passive: false });

canvas.addEventListener('touchend', () => { touching = false; });

canvas.addEventListener('mousedown', e => {
  if (state !== 'playing') return;
  touching = true;
  basket.targetX = getX(e);
});

canvas.addEventListener('mousemove', e => {
  if (state !== 'playing' || !touching) return;
  basket.targetX = getX(e);
});

canvas.addEventListener('mouseup', () => { touching = false; });

// Keyboard
document.addEventListener('keydown', e => {
  if (state !== 'playing') return;
  if (e.key === 'ArrowLeft') basket.targetX = basket.x - 40;
  if (e.key === 'ArrowRight') basket.targetX = basket.x + 40;
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Drawing helpers
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function drawCloud(c) {
  ctx.save();
  ctx.globalAlpha = c.opacity;
  ctx.fillStyle = '#fff';
  ctx.beginPath();
  const r = c.w * 0.25;
  ctx.arc(c.x, c.y, r, 0, Math.PI * 2);
  ctx.arc(c.x + r * 0.8, c.y - r * 0.4, r * 0.8, 0, Math.PI * 2);
  ctx.arc(c.x + r * 1.6, c.y, r * 0.7, 0, Math.PI * 2);
  ctx.arc(c.x - r * 0.6, c.y + r * 0.2, r * 0.6, 0, Math.PI * 2);
  ctx.fill();
  ctx.restore();
}

function drawBasket(x, y, w, h) {
  ctx.save();

  // Shadow
  ctx.fillStyle = 'rgba(0,0,0,0.1)';
  ctx.beginPath();
  ctx.ellipse(x, y + h + 4, w * 0.45, 4, 0, 0, Math.PI * 2);
  ctx.fill();

  // Basket body
  const grad = ctx.createLinearGradient(x - w/2, y, x + w/2, y + h);
  grad.addColorStop(0, '#d4a574');
  grad.addColorStop(0.5, '#c4956a');
  grad.addColorStop(1, '#a67c52');
  ctx.fillStyle = grad;

  // Trapezoid shape
  const topW = w * 0.5;
  const botW = w * 0.4;
  ctx.beginPath();
  ctx.moveTo(x - topW, y);
  ctx.lineTo(x + topW, y);
  ctx.lineTo(x + botW, y + h);
  ctx.lineTo(x - botW, y + h);
  ctx.closePath();
  ctx.fill();

  // Rim
  ctx.strokeStyle = '#8B6914';
  ctx.lineWidth = 3;
  ctx.beginPath();
  ctx.moveTo(x - topW - 4, y);
  ctx.lineTo(x + topW + 4, y);
  ctx.stroke();

  // Weave lines
  ctx.strokeStyle = 'rgba(139,105,20,0.3)';
  ctx.lineWidth = 1;
  for (let i = 1; i < 4; i++) {
    const py = y + (h * i / 4);
    const ratio = i / 4;
    const lw = topW + (botW - topW) * ratio;
    ctx.beginPath();
    ctx.moveTo(x - lw, py);
    ctx.lineTo(x + lw, py);
    ctx.stroke();
  }

  // Handle
  ctx.strokeStyle = '#8B6914';
  ctx.lineWidth = 3;
  ctx.beginPath();
  ctx.arc(x, y - 12, topW * 0.6, Math.PI, 0);
  ctx.stroke();

  // Magnet aura
  if (powers.magnet > 0) {
    const magnetR = w * 2.5;
    const mgGrad = ctx.createRadialGradient(x, y + h/2, 0, x, y + h/2, magnetR);
    mgGrad.addColorStop(0, 'rgba(59,130,246,0.15)');
    mgGrad.addColorStop(0.7, 'rgba(59,130,246,0.05)');
    mgGrad.addColorStop(1, 'rgba(59,130,246,0)');
    ctx.fillStyle = mgGrad;
    ctx.beginPath();
    ctx.arc(x, y + h/2, magnetR, 0, Math.PI * 2);
    ctx.fill();
  }

  ctx.restore();
}

function drawItem(item) {
  ctx.save();
  ctx.font = `${item.size}px serif`;
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';

  // Glow for power-ups
  if (item.type === 'power') {
    ctx.shadowColor = '#a855f7';
    ctx.shadowBlur = 15;
  } else if (item.type === 'bomb') {
    ctx.shadowColor = '#ef4444';
    ctx.shadowBlur = 10;
  }

  // Rotation for bombs
  if (item.type === 'bomb') {
    ctx.translate(item.x, item.y);
    ctx.rotate(item.rot || 0);
    ctx.fillText(item.emoji, 0, 0);
  } else {
    ctx.fillText(item.emoji, item.x, item.y);
  }
  ctx.restore();
}

function drawGrass() {
  ctx.save();
  // Green ground
  const gGrad = ctx.createLinearGradient(0, grassY, 0, H);
  gGrad.addColorStop(0, '#7ec850');
  gGrad.addColorStop(1, '#5da03a');
  ctx.fillStyle = gGrad;
  ctx.fillRect(0, grassY, W, H - grassY);

  // Grass blades
  ctx.fillStyle = '#8fd460';
  for (let x = 0; x < W; x += 12) {
    const h = 4 + Math.sin(x * 0.3 + animFrame * 0.02) * 3;
    ctx.beginPath();
    ctx.moveTo(x, grassY);
    ctx.lineTo(x + 3, grassY - h);
    ctx.lineTo(x + 6, grassY);
    ctx.fill();
  }
  ctx.restore();
}

function drawParticle(p) {
  ctx.save();
  ctx.globalAlpha = p.alpha;
  if (p.emoji) {
    ctx.font = `${p.size}px serif`;
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText(p.emoji, p.x, p.y);
  } else {
    ctx.fillStyle = p.color;
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
    ctx.fill();
  }
  ctx.restore();
}

function drawFloatText(ft) {
  ctx.save();
  ctx.globalAlpha = ft.alpha;
  ctx.font = `bold ${ft.size}px -apple-system, sans-serif`;
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';
  ctx.fillStyle = ft.color;
  ctx.strokeStyle = 'rgba(255,255,255,0.8)';
  ctx.lineWidth = 3;
  ctx.strokeText(ft.text, ft.x, ft.y);
  ctx.fillText(ft.text, ft.x, ft.y);
  ctx.restore();
}

function drawBackground() {
  // Sky gradient
  const skyGrad = ctx.createLinearGradient(0, 0, 0, H);
  skyGrad.addColorStop(0, '#87CEEB');
  skyGrad.addColorStop(0.6, '#b8e6ff');
  skyGrad.addColorStop(1, '#c8f0c0');
  ctx.fillStyle = skyGrad;
  ctx.fillRect(0, 0, W, H);

  // Sun
  const sunX = W * 0.85, sunY = H * 0.08;
  const sunGrad = ctx.createRadialGradient(sunX, sunY, 0, sunX, sunY, 50);
  sunGrad.addColorStop(0, 'rgba(255,236,130,0.9)');
  sunGrad.addColorStop(0.6, 'rgba(255,236,130,0.3)');
  sunGrad.addColorStop(1, 'rgba(255,236,130,0)');
  ctx.fillStyle = sunGrad;
  ctx.beginPath();
  ctx.arc(sunX, sunY, 50, 0, Math.PI * 2);
  ctx.fill();

  // Clouds
  clouds.forEach(drawCloud);

  // Grass
  drawGrass();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Game Logic
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function spawnItem() {
  const def = pickItem();
  const size = 28 + Math.random() * 8;
  items.push({
    x: 20 + Math.random() * (W - 40),
    y: -size,
    vx: (Math.random() - 0.5) * 0.5,
    vy: 1.5 + level * 0.3 + Math.random() * 0.5,
    size,
    rot: 0,
    rotSpeed: def.type === 'bomb' ? (Math.random() - 0.5) * 0.1 : 0,
    ...def
  });
}

function addParticles(x, y, color, count, emoji) {
  for (let i = 0; i < count; i++) {
    const angle = Math.random() * Math.PI * 2;
    const speed = 1 + Math.random() * 3;
    particles.push({
      x, y,
      vx: Math.cos(angle) * speed,
      vy: Math.sin(angle) * speed - 2,
      size: emoji ? 12 + Math.random() * 8 : 2 + Math.random() * 3,
      alpha: 1,
      color,
      emoji: emoji || null,
      life: 0.6 + Math.random() * 0.4
    });
  }
}

function addFloatText(x, y, text, color, size = 20) {
  floatTexts.push({ x, y, text, color, size, alpha: 1, vy: -2 });
}

function catchItem(item) {
  const idx = items.indexOf(item);
  if (idx === -1) return;
  items.splice(idx, 1);

  if (item.type === 'fruit') {
    let pts = item.pts;
    combo++;
    if (combo >= 5) pts = Math.floor(pts * 1.5);
    if (powers.double > 0) pts *= 2;

    score += pts;
    caught++;
    addParticles(item.x, item.y, '#ffd700', 6, null);
    addFloatText(item.x, item.y - 20, `+${pts}`, '#ff6b35', combo >= 5 ? 26 : 20);
    TG.haptic('impact', 'light');

    // Level up
    const newLevel = Math.floor(score / 200) + 1;
    if (newLevel > level) {
      level = newLevel;
      addFloatText(W/2, H/2, `Level ${level}!`, '#e94560', 32);
      TG.haptic('notification', 'success');
    }
    updateHUD();

  } else if (item.type === 'bomb') {
    lives--;
    combo = 0;
    shakeTimer = 15;
    addParticles(item.x, item.y, '#ef4444', 12, null);
    addFloatText(item.x, item.y - 20, 'ğŸ’¥', '#ef4444', 30);
    TG.haptic('notification', 'error');
    updateHUD();

    if (lives <= 0) {
      endGame();
    }

  } else if (item.type === 'power') {
    const dur = 300; // frames (~5 sec at 60fps)
    powers[item.power] = dur;
    addParticles(item.x, item.y, '#a855f7', 8, 'âœ¨');
    const labels = { magnet: 'ğŸ§²', freeze: 'â°', double: 'âœ¨2x' };
    addFloatText(item.x, item.y - 20, labels[item.power], '#7c3aed', 28);
    TG.haptic('impact', 'heavy');
    updateHUD();
  }
}

function updateHUD() {
  document.getElementById('hud-score').textContent = `ğŸ§º ${score.toLocaleString()}`;
  document.getElementById('hud-level').textContent = `Lv.${level}`;

  // Lives
  const livesStr = 'â¤ï¸'.repeat(Math.max(0, lives)) + 'ğŸ–¤'.repeat(Math.max(0, 3 - lives));
  document.getElementById('hud-lives').textContent = livesStr;

  // Combo
  const comboEl = document.getElementById('hud-combo');
  if (combo >= 3) {
    comboEl.style.display = '';
    comboEl.textContent = `ğŸ”¥ x${combo}`;
  } else {
    comboEl.style.display = 'none';
  }

  // Power
  const powerEl = document.getElementById('hud-power');
  const activePowers = [];
  if (powers.magnet > 0) activePowers.push('ğŸ§²');
  if (powers.freeze > 0) activePowers.push('â°');
  if (powers.double > 0) activePowers.push('âœ¨2x');
  if (activePowers.length) {
    powerEl.style.display = '';
    powerEl.textContent = activePowers.join(' ');
  } else {
    powerEl.style.display = 'none';
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Game Loop
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let lastTime = 0;

function update(dt) {
  animFrame++;

  // Clouds
  clouds.forEach(c => {
    c.x += c.speed;
    if (c.x > W + c.w) c.x = -c.w;
  });

  if (state !== 'playing') return;

  // Basket movement (smooth follow)
  const targetClamped = Math.max(basket.w/2, Math.min(W - basket.w/2, basket.targetX));
  basket.x += (targetClamped - basket.x) * 0.2;

  // Spawn items
  lastSpawn += dt;
  const si = Math.max(400, spawnInterval - level * 80);
  if (lastSpawn >= si) {
    spawnItem();
    lastSpawn = 0;
  }

  // Update items
  const freezeMult = powers.freeze > 0 ? 0.3 : 1;
  const magnetRange = basket.w * 2.5;

  for (let i = items.length - 1; i >= 0; i--) {
    const it = items[i];

    // Magnet effect
    if (powers.magnet > 0 && it.type !== 'bomb') {
      const dx = basket.x - it.x;
      const dy = (basket.y + basket.h/2) - it.y;
      const dist = Math.sqrt(dx*dx + dy*dy);
      if (dist < magnetRange && dist > 0) {
        const pull = 3 * (1 - dist / magnetRange);
        it.x += (dx / dist) * pull;
        it.y += (dy / dist) * pull * 0.5;
      }
    }

    it.x += it.vx * freezeMult;
    it.y += it.vy * freezeMult;
    it.rot += it.rotSpeed;

    // Collision with basket
    const bx = basket.x, by = basket.y;
    const bw2 = basket.w * 0.5, bh = basket.h;
    if (it.y + it.size/2 > by && it.y - it.size/2 < by + bh &&
        it.x > bx - bw2 && it.x < bx + bw2) {
      catchItem(it);
      continue;
    }

    // Off screen
    if (it.y > H + 40) {
      items.splice(i, 1);
      if (it.type === 'fruit') {
        combo = 0;
        updateHUD();
      }
    }
  }

  // Powers countdown
  for (const k of Object.keys(powers)) {
    if (powers[k] > 0) {
      powers[k]--;
      if (powers[k] <= 0) updateHUD();
    }
  }

  // Particles
  for (let i = particles.length - 1; i >= 0; i--) {
    const p = particles[i];
    p.x += p.vx;
    p.y += p.vy;
    p.vy += 0.1;
    p.alpha -= 1 / (p.life * 60);
    if (p.alpha <= 0) particles.splice(i, 1);
  }

  // Float texts
  for (let i = floatTexts.length - 1; i >= 0; i--) {
    const ft = floatTexts[i];
    ft.y += ft.vy;
    ft.alpha -= 0.015;
    if (ft.alpha <= 0) floatTexts.splice(i, 1);
  }

  // Shake
  if (shakeTimer > 0) {
    shakeTimer--;
    shakeX = (Math.random() - 0.5) * 8;
    shakeY = (Math.random() - 0.5) * 8;
  } else {
    shakeX = shakeY = 0;
  }
}

function draw() {
  ctx.save();
  ctx.translate(shakeX, shakeY);

  drawBackground();

  // Items
  items.forEach(drawItem);

  // Basket
  drawBasket(basket.x, basket.y, basket.w, basket.h);

  // Particles
  particles.forEach(drawParticle);

  // Float texts
  floatTexts.forEach(drawFloatText);

  // Freeze overlay
  if (powers.freeze > 0) {
    ctx.fillStyle = 'rgba(100,180,255,0.06)';
    ctx.fillRect(-10, -10, W + 20, H + 20);
  }

  ctx.restore();
}

function gameLoop(ts) {
  const dt = lastTime ? Math.min(ts - lastTime, 50) : 16;
  lastTime = ts;

  update(dt);
  draw();
  requestAnimationFrame(gameLoop);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Screen Management
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  const el = document.getElementById(id);
  if (el) el.classList.add('active');
  const hud = document.getElementById('hud');
  hud.classList.toggle('active', id === 'none');
}

window.startGame = function() {
  state = 'playing';
  score = 0; level = 1; lives = 3; combo = 0; caught = 0;
  items = []; particles = []; floatTexts = [];
  powers = { magnet: 0, freeze: 0, double: 0 };
  lastSpawn = 0;
  basket.x = W / 2;
  basket.targetX = W / 2;

  showScreen('none');
  document.getElementById('hud').classList.add('active');
  updateHUD();
  TG.haptic('impact', 'medium');
};

function endGame() {
  state = 'over';
  document.getElementById('hud').classList.remove('active');

  const result = GameScore.save(GAME_ID, score);

  document.getElementById('go-score').textContent = score.toLocaleString();
  const bestEl = document.getElementById('go-best');
  bestEl.textContent = `ğŸ… ${T('best')}: ${result.bestScore.toLocaleString()}`;

  const nbEl = document.getElementById('go-newbest');
  nbEl.style.display = result.isNewBest ? '' : 'none';

  document.getElementById('go-extra').textContent =
    `${T('lvl')} ${level} Â· ${T('caught')} ${caught}`;

  showScreen('gameover');
  TG.haptic('notification', result.isNewBest ? 'success' : 'warning');
}

window.shareResult = function() {
  TG.shareScore(score, 'Catch Basket', GAME_ID);
};

window.goHome = function() {
  state = 'menu';
  updateMenuStats();
  showScreen('menu');
};

window.showHow = function() {
  showScreen('howto');
};

window.hideHow = function() {
  showScreen('menu');
};

function updateMenuStats() {
  document.getElementById('stat-best').textContent = GameScore.getBest(GAME_ID).toLocaleString();
  document.getElementById('stat-plays').textContent = GameScore.getPlays(GAME_ID).toLocaleString();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Back button
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TG.onBack(() => {
  if (state === 'playing') {
    endGame();
    return true;
  }
  if (state === 'over') {
    goHome();
    return true;
  }
  const howto = document.getElementById('howto');
  if (howto.classList.contains('active')) {
    hideHow();
    return true;
  }
  return false;
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Init
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
updateMenuStats();
requestAnimationFrame(gameLoop);
</script>
</body>
</html>